!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Curve=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(c){(function(){var d,e,f;d=a("./point"),f=function(){var a;return a="undefined"!=typeof c&&null!==c?c:window,null==a.NodeObjectMap&&(a.NodeObjectMap={}),a.NodeObjectMap},e={getObjectFromNode:function(a){return f()[a.id]},setObjectOnNode:function(a,b){return f()[a.id]=b},pointForEvent:function(a,b){var c,e,f,g;return c=b.clientX,e=b.clientY,g=this.svgDocument.node.offsetTop,f=this.svgDocument.node.offsetLeft,new d(b.clientX-f,b.clientY-g)}},b.exports=e}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./point":14}],2:[function(a,b,c){(function(){a("./ext/svg-circle"),a("./ext/svg-draggable"),a("../vendor/svg.parser"),a("../vendor/svg.export"),b.exports={Point:a("./point"),Size:a("./size"),Transform:a("./transform"),Utils:a("./utils"),Node:a("./node"),Path:a("./path"),Subpath:a("./subpath"),Rectangle:a("./rectangle"),NodeEditor:a("./node-editor"),ObjectEditor:a("./object-editor"),ObjectSelection:a("./object-selection"),PathEditor:a("./path-editor"),PathParser:a("./path-parser"),SelectionModel:a("./selection-model"),SelectionView:a("./selection-view"),PenTool:a("./pen-tool"),PointerTool:a("./pointer-tool"),SVGDocument:a("./svg-document")}}).call(this)},{"../vendor/svg.export":26,"../vendor/svg.parser":28,"./ext/svg-circle":4,"./ext/svg-draggable":5,"./node":7,"./node-editor":6,"./object-editor":8,"./object-selection":9,"./path":12,"./path-editor":10,"./path-parser":11,"./pen-tool":13,"./point":14,"./pointer-tool":15,"./rectangle":16,"./selection-model":17,"./selection-view":18,"./size":20,"./subpath":21,"./svg-document":22,"./transform":23,"./utils":24}],3:[function(a,b,c){(function(){var c,d,e,f;e=a("../vendor/svg"),a("../vendor/svg.parser"),c=a("./path"),d=a("./rectangle"),b.exports=function(a,b){var e,g,h,i;return e={path:function(b){return[new c(a,{svgEl:b})]},rect:function(b){return[new d(a,{svgEl:b})]}},h=document.createElement("div"),i={},h.innerHTML=b.replace(/\n/,"").replace(/<(\w+)([^<]+?)\/>/g,"<$1$2></$1>"),g=[],f(h.childNodes,a,0,i,function(){var a;return a=this.node.nodeName,e[a]&&(g=g.concat(e[a](this))),null}),h=null,window.objs=g,g},f=function(a,b,c,d,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u;for(m=o=0,q=a.length;q>=0?q>o:o>q;m=q>=0?++o:--o){switch(i=a[m],h={},j=[],u=i.nodeName.toLowerCase(),h=e.parse.attr(i),u){case"path":k=b[u]();break;case"polygon":k=b[u]();break;case"polyline":k=b[u]();break;case"rect":k=b[u](0,0);break;case"circle":k=b[u](0,0);break;case"ellipse":k=b[u](0,0);break;case"line":k=b.line(0,0,0,0);break;case"text":if(0===i.childNodes.length)k=b[u](i.textContent);else for(k=null,n=p=0,r=i.childNodes.length;r>=0?r>p:p>r;n=r>=0?++p:--p)l=i.childNodes[n],"tspan"===l.nodeName.toLowerCase()&&(null===k?k=b[u](l.textContent):k.tspan(l.textContent).attr(e.parse.attr(l)));break;case"image":k=b.image(h["xlink:href"]);break;case"g":case"svg":k=b["g"===u?"group":"nested"](),f(i.childNodes,k,c+1,d,g);break;case"defs":f(i.childNodes,b.defs(),c+1,d,g);break;case"use":k=b.use();break;case"clippath":case"mask":k=b[null!=(s="mask"===u)?s:{mask:"clip"}](),f(i.childNodes,k,c+1,d,g);break;case"lineargradient":case"radialgradient":k=b.defs().gradient(u.split("gradient")[0],function(a){var b,c,d;for(d=[],n=b=0,c=i.childNodes.length;c>=0?c>b:b>c;n=c>=0?++b:--b)d.push(a.at({offset:0}).attr(e.parse.attr(i.childNodes[n])).style(i.childNodes[n].getAttribute("style")));return d});break;case"#comment":case"#text":case"metadata":case"desc":break;default:console.log("SVG Import got unexpected type "+u,i)}k&&(t=e.parse.transform(h.transform),delete h.transform,k.attr(h).transform(t),k.attr("id")&&(d[k.attr("id")]=k),"text"===u&&k.rebuild(),"function"==typeof g&&g.call(k))}return b}}).call(this)},{"../vendor/svg":27,"../vendor/svg.parser":28,"./path":12,"./rectangle":16}],4:[function(a,b,c){(function(){var b,c=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},d={}.hasOwnProperty;b=a("../../vendor/svg.js"),b.Circle=function(a){function d(){d.__super__.constructor.call(this,b.create("circle"))}return c(d,a),d.prototype.cx=function(a){return null===a?this.attr("cx"):this.attr("cx",new b.Number(a).divide(this.trans.scaleX))},d.prototype.cy=function(a){return null===a?this.attr("cy"):this.attr("cy",new b.Number(a).divide(this.trans.scaleY))},d.prototype.radius=function(a){return this.attr({r:new b.Number(a)})},d}(b.Shape),b.extend(b.Container,{circle:function(a){return this.put(new b.Circle).radius(a).move(0,0)}})}).call(this)},{"../../vendor/svg.js":27}],5:[function(a,b,c){(function(){var b,c,d,e,f,g,h;b=a("../../vendor/svg"),c=/translate\(([-0-9]+) ([-0-9]+)\)/,b.extend(b.Element,{draggable:function(){var a,b,c,i;return b=this,"function"==typeof this.fixed&&this.fixed(),i=function(e){return h(b,e),d(a,c)},a=function(a){return f(b,a)},c=function(d){return g(b,d),e(a,c)},b.on("mousedown",i),b.fixed=function(){return b.off("mousedown",i),e(),i=a=c=null,b},this}}),d=function(a,c){return b.on(window,"mousemove",a),b.on(window,"mouseup",c)},e=function(a,c){return b.off(window,"mousemove",a),b.off(window,"mouseup",c)},h=function(a,d){var e,f,g,h,i,j;return null==d&&(d=window.event),e=a.parent(b.Nested)||a(b.Doc),a.startEvent=d,h=i=0,g=c.exec(a.attr("transform")),null!=g&&(h=parseInt(g[1]),i=parseInt(g[2])),j=e.viewbox().zoom,f=a.transform("rotation")*Math.PI/180,a.startPosition={x:h,y:i,zoom:j,rotation:f},"function"==typeof a.dragstart&&a.dragstart({x:0,y:0,zoom:j},d),d.preventDefault?d.preventDefault():d.returnValue=!1},f=function(a,b){var c,d,e,f;return null==b&&(b=window.event),a.startEvent?(d=a.startPosition.rotation,c={x:b.pageX-a.startEvent.pageX,y:b.pageY-a.startEvent.pageY,zoom:a.startPosition.zoom},e=a.startPosition.x+(c.x*Math.cos(d)+c.y*Math.sin(d))/a.startPosition.zoom,f=a.startPosition.y+(c.y*Math.cos(d)+c.x*Math.sin(-d))/a.startPosition.zoom,a.transform({x:e,y:f}),"function"==typeof a.dragmove?a.dragmove(c,b):void 0):void 0},g=function(a,b){var c;return null==b&&(b=window.event),c={x:b.pageX-a.startEvent.pageX,y:b.pageY-a.startEvent.pageY,zoom:a.startPosition.zoom},a.startEvent=null,a.startPosition=null,"function"==typeof a.dragend?a.dragend(c,b):void 0}}).call(this)},{"../../vendor/svg":27}],6:[function(a,b,c){(function(){var c,d,e=function(a,b){return function(){return a.apply(b,arguments)}};d=a("./point"),b.exports=c=function(){function a(a,b){this.svgToolParent=a,this.pathEditor=b,this.onDraggingHandleOut=e(this.onDraggingHandleOut,this),this.onDraggingHandleIn=e(this.onDraggingHandleIn,this),this.onDraggingNode=e(this.onDraggingNode,this),this.render=e(this.render,this),this.svgDocument=this.svgToolParent.parent(),this._setupNodeElement(),this._setupLineElement(),this._setupHandleElements(),this.hide()}var b,c,f,g;return a.prototype.nodeSize=5,a.prototype.handleSize=3,f=null,g=null,b=null,c=null,a.prototype.hide=function(){return this.visible=!1,this.lineElement.hide(),this.nodeElement.hide(),this.handleElements.hide()},a.prototype.show=function(a){return this.visible=!0,this.nodeElement.show(),a&&(this.lineElement.front(),this.nodeElement.front(),this.handleElements.front()),this.enableHandles?(this.lineElement.show(),this.handleElements.show()):(this.lineElement.hide(),this.handleElements.hide())},a.prototype.setEnableHandles=function(a){return this.enableHandles=a,this.visible?this.show():void 0},a.prototype.setNode=function(a){return this._unbindNode(this.node),this.node=a,this._bindNode(this.node),this.setEnableHandles(!1),this.render()},a.prototype.render=function(){var a,b,c,d;return this.node?(a=this.node.getAbsoluteHandleIn(),b=this.node.getAbsoluteHandleOut(),d=this.node.getPoint(),c="M"+a.x+","+a.y+"L"+d.x+","+d.y+"L"+b.x+","+b.y,this.lineElement.attr({d:c}),this.handleElements.members[0].attr({cx:a.x,cy:a.y,transform:""}),this.handleElements.members[1].attr({cx:b.x,cy:b.y,transform:""}),this.nodeElement.attr({cx:d.x,cy:d.y,transform:""}),this.show(),this._draggingHandle?this._draggingHandle.front():void 0):this.hide()},a.prototype.onDraggingNode=function(a,b){return this.node.setPoint(this.pointForEvent(b))},a.prototype.onDraggingHandleIn=function(a,b){return this.node.setAbsoluteHandleIn(this.pointForEvent(b))},a.prototype.onDraggingHandleOut=function(a,b){return this.node.setAbsoluteHandleOut(this.pointForEvent(b))},a.prototype.pointForEvent=function(a){var b,c,e,f;return b=a.clientX,c=a.clientY,f=this._getOffsetTop(),e=this._getOffsetLeft(),new d(a.clientX-e,a.clientY-f)},a.prototype._getOffsetTop=function(){return this.svgDocument.node.offsetTop},a.prototype._getOffsetLeft=function(){return this.svgDocument.node.offsetLeft},a.prototype._bindNode=function(a){var b;if(a)return a.addListener("change",this.render),null!=(b=a.getPath())?b.addListener("change",this.render):void 0},a.prototype._unbindNode=function(a){var b;if(a)return a.removeListener("change",this.render),null!=(b=a.getPath())?b.addListener("change",this.render):void 0},a.prototype._setupNodeElement=function(){return this.nodeElement=this.svgToolParent.circle(this.nodeSize),this.nodeElement.node.setAttribute("class","node-editor-node"),this.nodeElement.click(function(a){return function(b){return b.stopPropagation(),a.setEnableHandles(!0),a.pathEditor.activateNode(a.node),!1}}(this)),this.nodeElement.draggable(),this.nodeElement.dragstart=function(a){return function(){return a.pathEditor.activateNode(a.node)}}(this),this.nodeElement.dragmove=this.onDraggingNode,this.nodeElement.on("mouseover",function(a){return function(){return a.nodeElement.front(),a.nodeElement.attr({r:a.nodeSize+2})}}(this)),this.nodeElement.on("mouseout",function(a){return function(){return a.nodeElement.attr({r:a.nodeSize})}}(this))},a.prototype._setupLineElement=function(){return this.lineElement=this.svgToolParent.path(""),this.lineElement.node.setAttribute("class","node-editor-lines")},a.prototype._setupHandleElements=function(){var a,b,c;return c=this,this.handleElements=this.svgToolParent.set(),this.handleElements.add(this.svgToolParent.circle(this.handleSize),this.svgToolParent.circle(this.handleSize)),this.handleElements.members[0].node.setAttribute("class","node-editor-handle"),this.handleElements.members[1].node.setAttribute("class","node-editor-handle"),this.handleElements.click(function(a){return function(a){return a.stopPropagation(),!1}}(this)),a=function(){return c._draggingHandle=this},b=function(){return c._draggingHandle=null},this.handleElements.members[0].draggable(),this.handleElements.members[0].dragmove=this.onDraggingHandleIn,this.handleElements.members[0].dragstart=a,this.handleElements.members[0].dragend=b,this.handleElements.members[1].draggable(),this.handleElements.members[1].dragmove=this.onDraggingHandleOut,this.handleElements.members[1].dragstart=a,this.handleElements.members[1].dragend=b,this.handleElements.on("mouseover",function(){return this.front(),this.attr({r:c.handleSize+2})}),this.handleElements.on("mouseout",function(){return this.attr({r:c.handleSize})})},a}()}).call(this)},{"./point":14}],7:[function(a,b,c){(function(){var c,d,e,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;c=a("events").EventEmitter,e=a("./point"),b.exports=d=function(a){function b(a,b,c,d){this.isJoined=null!=d?d:!1,this.setPoint(a),b&&this.setHandleIn(b),c&&this.setHandleOut(c)}return f(b,a),b.prototype.join=function(a){return null==a&&(a="handleIn"),this.isJoined=!0,this["set"+a.replace("h","H")](this[a])},b.prototype.setPath=function(a){this.path=a},b.prototype.getPath=function(){return this.path},b.prototype.getPoint=function(){return this._transformPoint(this.point)},b.prototype.getHandleIn=function(){return this.handleIn},b.prototype.getHandleOut=function(){return this.handleOut},b.prototype.getAbsoluteHandleIn=function(){return this.handleIn?this._transformPoint(this.point.add(this.handleIn)):this.getPoint()},b.prototype.getAbsoluteHandleOut=function(){return this.handleOut?this._transformPoint(this.point.add(this.handleOut)):this.getPoint()},b.prototype.setAbsoluteHandleIn=function(a){return this.setHandleIn(e.create(a).subtract(this.point))},b.prototype.setAbsoluteHandleOut=function(a){return this.setHandleOut(e.create(a).subtract(this.point))},b.prototype.setPoint=function(a){return this.set("point",e.create(a))},b.prototype.setHandleIn=function(a){return a&&(a=e.create(a)),this.set("handleIn",a),this.isJoined?this.set("handleOut",a?new e(0,0).subtract(a):a):void 0},b.prototype.setHandleOut=function(a){return a&&(a=e.create(a)),this.set("handleOut",a),this.isJoined?this.set("handleIn",a?new e(0,0).subtract(a):a):void 0},b.prototype.computeIsjoined=function(){return this.isJoined=!this.handleIn&&!this.handleOut||this.handleIn&&this.handleOut&&Math.round(this.handleIn.x)===Math.round(-this.handleOut.x)&&Math.round(this.handleIn.y)===Math.round(-this.handleOut.y)},b.prototype.set=function(a,b){var c,d,e;return e=this[a],this[a]=b,c="change:"+a,d={event:c,value:b,old:e},this.emit(c,this,d),this.emit("change",this,d)},b.prototype.translate=function(a){return a=e.create(a),this.set("point",this.point.add(a))},b.prototype._transformPoint=function(a){var b,c;return c=null!=(b=this.path)?b.getTransform():void 0,null!=c&&(a=c.transformPoint(a)),a},b}(c)}).call(this)},{"./point":14,events:25}],8:[function(a,b,c){(function(){var c,d,e=function(a,b){return function(){return a.apply(b,arguments)}};d=a("./path-editor"),b.exports=c=function(){function a(a,b){this.svgDocument=a,this.selectionModel=b,this.onChangeSelected=e(this.onChangeSelected,this),this.active=!1,this.activeEditor=null,this.editors={Path:new d(this.svgDocument)}}return a.prototype.isActive=function(){return this.active},a.prototype.getActiveObject=function(){var a,b;return null!=(a=null!=(b=this.activeEditor)?b.getActiveObject():void 0)?a:null},a.prototype.activate=function(){return this.active=!0,this.selectionModel.on("change:selected",this.onChangeSelected)},a.prototype.deactivate=function(){return this.selectionModel.removeListener("change:selected",this.onChangeSelected),this._deactivateActiveEditor(),this.active=!1},a.prototype.onChangeSelected=function(a){var b,c,d;return b=a.object,c=a.old,this._deactivateActiveEditor(),null!=b?(this.activeEditor=this.editors[b.getType()],null!=(d=this.activeEditor)?d.activateObject(b):void 0):void 0},a.prototype._deactivateActiveEditor=function(){var a;return null!=(a=this.activeEditor)&&a.deactivate(),this.activeEditor=null},a}()}).call(this)},{"./path-editor":10}],9:[function(a,b,c){(function(){var c,d,e=function(a,b){return function(){return a.apply(b,arguments)}},f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;c=a("events").EventEmitter,b.exports=d=function(a){function b(a,b){var c;this.svgDocument=a,this.options=null!=b?b:{},this.render=e(this.render,this),null==(c=this.options)["class"]&&(c["class"]="object-selection")}return f(b,a),b.prototype.setObject=function(a){var b;return this._unbindObject(this.object),b=a,this.object=a,this._bindObject(this.object),this.trackingObject&&this.trackingObject.remove(),this.trackingObject=null,this.object&&(this.trackingObject=this.object.cloneElement(this.svgDocument).back(),this.trackingObject.node.setAttribute("class",this.options["class"]+" invisible-to-hit-test"),this.render()),this.emit("change:object",{objectSelection:this,object:this.object,old:b})},b.prototype.render=function(){return this.object.render(this.trackingObject)},b.prototype._bindObject=function(a){return a?a.on("change",this.render):void 0},b.prototype._unbindObject=function(a){return a?a.removeListener("change",this.render):void 0},b}(c)}).call(this)},{events:25}],10:[function(a,b,c){(function(){var c,d,e=function(a,b){return function(){return a.apply(b,arguments)}};c=a("./node-editor"),b.exports=d=function(){function a(a){this.svgDocument=a,this.onInsertNode=e(this.onInsertNode,this),this.path=null,this.node=null,this.nodeEditors=[],this._nodeEditorPool=[]}return a.prototype.isActive=function(){return!!this.path},a.prototype.getActiveObject=function(){return this.path},a.prototype.activateObject=function(a){return this.deactivate(),null!=a?(this.path=a,this._bindToObject(this.path),this._createNodeEditors(this.path)):void 0},a.prototype.deactivate=function(){return this.deactivateNode(),null!=this.path&&this._unbindFromObject(this.path),this._removeNodeEditors(),this.path=null},a.prototype.activateNode=function(a){var b;return this.deactivateNode(),null!=a&&(this.selectedNode=a,b=this._findNodeEditorForNode(a),null!=b)?b.setEnableHandles(!0):void 0},a.prototype.deactivateNode=function(){var a;return null!=this.selectedNode&&(a=this._findNodeEditorForNode(this.selectedNode),null!=a&&a.setEnableHandles(!1)),this.selectedNode=null},a.prototype.onInsertNode=function(a,b){var c,d,e;return e=null!=b?b:{},d=e.node,c=e.index,this._addNodeEditor(d),null},a.prototype._bindToObject=function(a){return a?a.on("insert:node",this.onInsertNode):void 0},a.prototype._unbindFromObject=function(a){return a?a.removeListener("insert:node",this.onInsertNode):void 0},a.prototype._removeNodeEditors=function(){var a,b,c,d;for(this._nodeEditorPool=this._nodeEditorPool.concat(this.nodeEditors),this.nodeEditors=[],d=this._nodeEditorPool,a=0,b=d.length;b>a;a++)c=d[a],c.setNode(null)},a.prototype._createNodeEditors=function(a){var b,c,d,e;if(this._removeNodeEditors(),null!=(null!=a?a.getNodes:void 0))for(e=a.getNodes(),b=0,c=e.length;c>b;b++)d=e[b],this._addNodeEditor(d)},a.prototype._addNodeEditor=function(a){var b;return a?(b=this._nodeEditorPool.length?this._nodeEditorPool.pop():new c(this.svgDocument,this),b.setNode(a),this.nodeEditors.push(b),!0):!1},a.prototype._findNodeEditorForNode=function(a){var b,c,d,e;for(e=this.nodeEditors,b=0,c=e.length;c>b;b++)if(d=e[b],d.node===a)return d;return null},a}()}).call(this)},{"./node-editor":6}],11:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j;e=a("./node"),j=["COMMAND","NUMBER"],c=j[0],d=j[1],h=function(a){var b;return b=g(a),i(f(b))},i=function(a){var b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;if(A={subpaths:[]},1===a.length&&("M"===(u=a[0].type)||"m"===u))return A;for(f=null,g=null,b=function(a){var b;return b=new e(a),g={closed:!1,nodes:[b]},A.subpaths.push(g),b},B=function(a,b){return[a[b],a[b+1]]},r=function(a){var b,c,d,e,g;for(e=[],b=c=0,d=a.length;d>c;b=++c)g=a[b],e.push(g+f[b%2]);return e},d=function(b,c){var d,h,i,j;return f=b,i=null,d=g.nodes[0],h=a[c+1],h&&("z"===(j=h.type)||"Z"===j)&&d&&d.point.equals(f)||(i=new e(f),g.nodes.push(i)),i},k=l=0,v=a.length;v>=0?v>l:l>v;k=v>=0?++l:--l)switch(c=a[k],c.type){case"M":f=c.parameters,b(f);break;case"L":case"l":t=c.parameters,"l"===c.type&&(t=r(t)),d(B(t,0),k);break;case"H":case"h":t=c.parameters,"h"===c.type&&(t=r(t)),d([t[0],f[1]],k);break;case"V":case"v":t=c.parameters,"v"===c.type&&(t=r([0,t[0]]),t=t.slice(1)),d([f[0],t[0]],k);break;case"C":case"c":case"Q":case"q":t=c.parameters,("c"===(w=c.type)||"q"===w)&&(t=r(t)),"C"===(x=c.type)||"c"===x?(f=B(t,4),i=B(t,2),j=B(t,0)):(f=B(t,2),i=j=B(t,0)),o=g.nodes[g.nodes.length-1],o.setAbsoluteHandleOut(j),(s=d(f,k))?s.setAbsoluteHandleIn(i):(h=g.nodes[0],h.setAbsoluteHandleIn(i));break;case"S":case"s":t=c.parameters,"s"===c.type&&(t=r(t)),f=B(t,2),i=B(t,0),o=g.nodes[g.nodes.length-1],o.join("handleIn"),(s=d(f,k))?s.setAbsoluteHandleIn(i):(h=g.nodes[0],h.setAbsoluteHandleIn(i));break;case"T":case"t":t=c.parameters,"t"===c.type&&(t=r(t)),f=B(t,0),o=g.nodes[g.nodes.length-1],o.join("handleIn"),i=o.getAbsoluteHandleOut(),(s=d(f,k))?s.setAbsoluteHandleIn(i):(h=g.nodes[0],h.setAbsoluteHandleIn(i));break;case"Z":case"z":g.closed=!0}for(y=A.subpaths,m=0,p=y.length;p>m;m++)for(C=y[m],z=C.nodes,n=0,q=z.length;q>n;n++)s=z[n],s.computeIsjoined();return A},f=function(a){var b,e,f,g,h,i,j;for(e=[],f=g=0,i=a.length;i>=0?i>g:g>i;f=i>=0?++g:--g)if(j=a[f],j.type===c){for(b={type:j.string,parameters:[]};(h=a[f+1])&&h.type===d;)b.parameters.push(parseFloat(h.string)),f++;e.push(b)}return e},g=function(a){var b,e,f,g,h,i,j,k,l;for(h="-0123456789.",k=" ,\n	",l=[],e=null,j=function(a){return e&&e.type!==a?i():void 0},i=function(){return e?(e.string.join&&(e.string=e.string.join("")),l.push(e),e=null):void 0},f=0,g=a.length;g>f;f++)b=a[f],h.indexOf(b)>-1?(j(d),"-"===b&&i(),e||(e={type:d,string:[]}),e.string.push(b)):k.indexOf(b)>-1?i():(i(),l.push({type:c,string:b}));return i(),l},b.exports={lexPath:g,parsePath:h,groupCommands:f,parseTokens:i}}).call(this)},{"./node":7}],12:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n=function(a,b){return function(){return a.apply(b,arguments)}},o=function(a,b){function c(){this.constructor=a}for(var d in b)p.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},p={}.hasOwnProperty;d=a("events").EventEmitter,l=a("./utils"),h=a("./path-parser"),k=a("./transform"),j=a("./subpath"),i=a("./point"),c={fill:"#eee",stroke:"none"},e=0,g=function(a){function b(){this.onSubpathChange=n(this.onSubpathChange,this),this.subpaths=[],this.pathString="",this.transform=new k}return o(b,a),b.prototype.getNodes=function(){var a,b;return a=function(){var a,c,d,e;for(d=this.subpaths,e=[],a=0,c=d.length;c>a;a++)b=d[a],e.push(b.getNodes());return e}.call(this),m(a)},b.prototype.getTransform=function(){return this.transform},b.prototype.getTransformString=function(){return this.transform.toString()},b.prototype.setTransformString=function(a){return this.transform.setTransformString(a)?this._emitChangeEvent():void 0},b.prototype.getPathString=function(){return this.pathString},b.prototype.setPathString=function(a){return a!==this.pathString?this._parseFromPathString(a):void 0},b.prototype.toString=function(){return this.getPathString()},b.prototype.translate=function(a){var b,c,d,e;for(a=i.create(a),d=this.subpaths,b=0,c=d.length;c>b;b++)e=d[b],e.translate(a)},b.prototype.addNode=function(a){return this._addCurrentSubpathIfNotPresent(),this.currentSubpath.addNode(a)},b.prototype.insertNode=function(a,b){return this._addCurrentSubpathIfNotPresent(),this.currentSubpath.insertNode(a,b)},b.prototype.close=function(){return this._addCurrentSubpathIfNotPresent(),this.currentSubpath.close()},b.prototype._addCurrentSubpathIfNotPresent=function(){return this.currentSubpath?void 0:this.currentSubpath=this._createSubpath()},b.prototype.onSubpathChange=function(a,b){return this._updatePathString(),this._emitChangeEvent()},b.prototype._createSubpath=function(a){return null==a&&(a={}),a.path=this,this._addSubpath(new j(a))},b.prototype._addSubpath=function(a){return this.subpaths.push(a),this._bindSubpath(a),this._updatePathString(),a},b.prototype._bindSubpath=function(a){return a?(a.on("change",this.onSubpathChange),a.on("insert:node",this._forwardEvent.bind(this,"insert:node"))):void 0},b.prototype._unbindSubpath=function(a){return a?a.removeAllListeners():void 0},b.prototype._removeAllSubpaths=function(){var a,b,c,d;for(c=this.subpaths,a=0,b=c.length;b>a;a++)d=c[a],this._unbindSubpath(d);return this.subpaths=[]},b.prototype._updatePathString=function(){var a,b;return a=this.pathString,this.pathString=function(){var a,c,d,e;for(d=this.subpaths,e=[],a=0,c=d.length;c>a;a++)b=d[a],e.push(b.toPathString());return e}.call(this).join(" "),a!==this.pathString?this._emitChangeEvent():void 0},b.prototype._parseFromPathString=function(a){var b,c,d,e,f;if(a&&a!==this.pathString){for(this._removeAllSubpaths(),d=h.parsePath(a),f=d.subpaths,b=0,c=f.length;c>b;b++)e=f[b],this._createSubpath(e);return this.currentSubpath=this.subpaths[this.subpaths.length-1],this._updatePathString(),null}},b.prototype._forwardEvent=function(a,b,c){return this.emit(a,this,c)},b.prototype._emitChangeEvent=function(){return this.emit("change",this)},b}(d),b.exports=f=function(a){function b(a,b){var c;this.svgDocument=a,c=(null!=b?b:{}).svgEl,this.onModelChange=n(this.onModelChange,this),this.id=e++,this.model=new g,this.model.on("change",this.onModelChange),this.model.on("insert:node",this._forwardEvent.bind(this,"insert:node")),this._setupSVGObject(c)}return o(b,a),b.prototype.getType=function(){return"Path"},b.prototype.toString=function(){return"Path "+this.id+" "+this.model.toString()},b.prototype.getPathString=function(){return this.model.getPathString()},b.prototype.getNodes=function(){return this.model.getNodes()},b.prototype.getSubpaths=function(){return this.model.subpaths},b.prototype.addNode=function(a){return this.model.addNode(a)},b.prototype.insertNode=function(a,b){return this.model.insertNode(a,b)},b.prototype.close=function(){return this.model.close()},b.prototype.enableDragging=function(a){var b;return b=this.svgEl,null!=b?(this.disableDragging(),b.draggable(),b.dragstart=function(b){return null!=a&&"function"==typeof a.dragstart?a.dragstart(b):void 0},b.dragmove=function(b){return function(c){return b.updateFromAttributes(),null!=a&&"function"==typeof a.dragmove?a.dragmove(c):void 0}}(this),b.dragend=function(b){return function(c){return b.model.setTransformString(null),b.model.translate([c.x,c.y]),null!=a&&"function"==typeof a.dragend?a.dragend(c):void 0}}(this)):void 0},b.prototype.disableDragging=function(){var a;return a=this.svgEl,null!=a?("function"==typeof a.fixed&&a.fixed(),a.dragstart=null,a.dragmove=null,a.dragend=null):void 0},b.prototype.updateFromAttributes=function(){var a,b;return a=this.svgEl.attr("d"),b=this.svgEl.attr("transform"),this.model.setTransformString(b),this.model.setPathString(a)},b.prototype.render=function(a){var b;return null==a&&(a=this.svgEl),b=this.model.getPathString(),b&&a.attr({d:b}),a.attr({transform:this.model.getTransformString()||null})},b.prototype.cloneElement=function(a){var b;return null==a&&(a=this.svgDocument),b=a.path(),this.render(b),b},b.prototype.onModelChange=function(){return this.render(),this.emit("change",this)},b.prototype._forwardEvent=function(a,b,c){return c.path=this,this.emit(a,this,c)},b.prototype._setupSVGObject=function(a){return this.svgEl=a,this.svgEl||(this.svgEl=this.svgDocument.path().attr(c)),l.setObjectOnNode(this.svgEl.node,this),this.model.setPathString(this.svgEl.attr("d"))},b}(d),m=function(a){var b;return b=function(a,b){return Array.isArray(b)?a.concat(m(b)):a.concat(b)},a.reduce(b,[])}}).call(this)},{"./path-parser":11,"./point":14,"./subpath":21,"./transform":23,"./utils":24,events:25}],13:[function(a,b,c){(function(){var c,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}};c=a("./node"),d=a("./path"),b.exports=e=function(){function a(a,b){var c;this.svgDocument=a,c=null!=b?b:{},this.selectionModel=c.selectionModel,this.selectionView=c.selectionView,this.onMouseUp=f(this.onMouseUp,this),this.onMouseMove=f(this.onMouseMove,this),this.onMouseDown=f(this.onMouseDown,this)}return a.prototype.currentObject=null,a.prototype.currentNode=null,a.prototype.activate=function(){return this.svgDocument.on("mousedown",this.onMouseDown),this.svgDocument.on("mousemove",this.onMouseMove),this.svgDocument.on("mouseup",this.onMouseUp)},a.prototype.deactivate=function(){return this.svgDocument.off("mousedown",this.onMouseDown),this.svgDocument.off("mousemove",this.onMouseMove),this.svgDocument.off("mouseup",this.onMouseUp)},a.prototype.onMouseDown=function(a){var b;return b=function(b){return function(){return b.currentNode=new c([a.clientX,a.clientY],[0,0],[0,0]),b.currentObject.addNode(b.currentNode),b.selectionModel.setSelectedNode(b.currentNode)}}(this),this.currentObject?this.selectionView.nodeEditors.length&&a.target===this.selectionView.nodeEditors[0].nodeElement.node?(this.currentObject.close(),this.currentObject=null):b():(this.currentObject=new d(this.svgDocument),this.selectionModel.setSelected(this.currentObject),b())},a.prototype.onMouseMove=function(a){return this.currentNode?this.currentNode.setAbsoluteHandleOut([a.clientX,a.clientY]):void 0},a.prototype.onMouseUp=function(a){return this.currentNode=null},a}()}).call(this)},{"./node":7,"./path":12}],14:[function(a,b,c){(function(){var a;b.exports=a=function(){function a(a,b){this.set(a,b)}return a.create=function(b,c){return b instanceof a?b:Array.isArray(b)?new a(b[0],b[1]):new a(b,c)},a.prototype.set=function(a,b){var c;return this.x=a,this.y=b,Array.isArray(this.x)?(c=this.x,this.x=c[0],this.y=c[1],c):void 0},a.prototype.add=function(b){return b=a.create(b),new a(this.x+b.x,this.y+b.y)},a.prototype.subtract=function(b){return b=a.create(b),new a(this.x-b.x,this.y-b.y)},a.prototype.toArray=function(){return[this.x,this.y]},a.prototype.equals=function(b){return b=a.create(b),b.x===this.x&&b.y===this.y},a.prototype.toString=function(){return"("+this.x+", "+this.y+")"},a}()}).call(this)},{}],15:[function(a,b,c){(function(){var c,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}};c=a("./object-editor"),e=a("./Utils"),b.exports=d=function(){function a(a,b){var d;this.svgDocument=a,d=null!=b?b:{},this.selectionModel=d.selectionModel,this.selectionView=d.selectionView,this.toolLayer=d.toolLayer,this.onMouseMove=f(this.onMouseMove,this),this.onClick=f(this.onClick,this),this.onChangedSelectedObject=f(this.onChangedSelectedObject,this),this._evrect=this.svgDocument.node.createSVGRect(),this._evrect.width=this._evrect.height=1,this.objectEditor=new c(this.toolLayer,this.selectionModel)}return a.prototype.activate=function(){var a;return this.objectEditor.activate(),this.svgDocument.on("click",this.onClick),this.svgDocument.on("mousemove",this.onMouseMove),a=this.selectionView.getObjectSelection(),a.on("change:object",this.onChangedSelectedObject)},a.prototype.deactivate=function(){var a;return this.objectEditor.deactivate(),this.svgDocument.off("click",this.onClick),this.svgDocument.off("mousemove",this.onMouseMove),a=this.selectionView.getObjectSelection(),a.removeListener("change:object",this.onChangedSelectedObject)},a.prototype.onChangedSelectedObject=function(a){var b,c;return b=a.object,c=a.old,null!=b?b.enableDragging():null!=c?c.disableDragging():void 0},a.prototype.onClick=function(a){var b;return b=this._hitWithTarget(a),this.selectionModel.setSelected(b),b?!1:void 0},a.prototype.onMouseMove=function(a){return this.selectionModel.setPreselected(this._hitWithTarget(a))},a.prototype._hitWithTarget=function(a){var b;return b=null,a.target!==this.svgDocument.node&&(b=e.getObjectFromNode(a.target)),b},a.prototype._hitWithIntersectionList=function(a){var b,c,d,f,g,h,i,j;if(j=this.svgDocument.node.offsetTop,f=this.svgDocument.node.offsetLeft,this._evrect.x=a.clientX-f,this._evrect.y=a.clientY-j,g=this.svgDocument.node.getIntersectionList(this._evrect,null),h=null,g.length)for(c=d=i=g.length-1;0>=i?0>=d:d>=0;c=0>=i?++d:--d)if(b=g[c].getAttribute("class"),!(b&&b.indexOf("invisible-to-hit-test")>-1)){h=e.getObjectFromNode(g[c]);break}return console.log(h),h},a}()}).call(this)},{"./Utils":1,"./object-editor":8}],16:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l=function(a,b){function c(){this.constructor=a}for(var d in b)m.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,
a},m={}.hasOwnProperty,n=function(a,b){return function(){return a.apply(b,arguments)}};d=a("events").EventEmitter,j=a("./transform"),k=a("./utils"),f=a("./point"),i=a("./size"),c={x:0,y:0,width:10,height:10,fill:"#eee",stroke:"none"},e=0,h=function(a){function b(){this.id=e++,this.transform=new j}return l(b,a),b.prototype.position=null,b.prototype.size=null,b.prototype.transform=null,b.prototype.getTransform=function(){return this.transform},b.prototype.getTransformString=function(){return this.transform.toString()},b.prototype.setTransformString=function(a){return this.transform.setTransformString(a)?this._emitChangeEvent():void 0},b.prototype.getPosition=function(){return this.position},b.prototype.setPosition=function(a,b){return this.position=f.create(a,b),this._emitChangeEvent()},b.prototype.getSize=function(){return this.size},b.prototype.setSize=function(a,b){return this.size=i.create(a,b),this._emitChangeEvent()},b.prototype.toString=function(){return"{Rect "+this.id+": "+this.position+" "+this.size},b.prototype.translate=function(a){return a=f.create(a),this.setPosition(this.position.add(a)),this._emitChangeEvent()},b.prototype._emitChangeEvent=function(){return this.emit("change",this)},b}(d),b.exports=g=function(a){function b(a,b){var c;this.svgDocument=a,c=(null!=b?b:{}).svgEl,this.onModelChange=n(this.onModelChange,this),this.model=new h,this._setupSVGObject(c),this.model.on("change",this.onModelChange)}return l(b,a),b.prototype.getType=function(){return"Rectangle"},b.prototype.toString=function(){return this.model.toString()},b.prototype.enableDragging=function(a){var b;return b=this.svgEl,null!=b?(this.disableDragging(),b.draggable(),b.dragstart=function(b){return null!=a&&"function"==typeof a.dragstart?a.dragstart(b):void 0},b.dragmove=function(b){return function(c){return b.updateFromAttributes(),null!=a&&"function"==typeof a.dragmove?a.dragmove(c):void 0}}(this),b.dragend=function(b){return function(c){return b.model.setTransformString(null),b.model.translate([c.x,c.y]),null!=a&&"function"==typeof a.dragend?a.dragend(c):void 0}}(this)):void 0},b.prototype.disableDragging=function(){var a;return a=this.svgEl,null!=a?("function"==typeof a.fixed&&a.fixed(),a.dragstart=null,a.dragmove=null,a.dragend=null):void 0},b.prototype.updateFromAttributes=function(){var a,b,c,d,e;return d=this.svgEl.attr("x"),e=this.svgEl.attr("y"),c=this.svgEl.attr("width"),a=this.svgEl.attr("height"),b=this.svgEl.attr("transform"),this.model.setPosition(d,e),this.model.setSize(c,a),this.model.setTransformString(b)},b.prototype.render=function(a){var b,c;return null==a&&(a=this.svgEl),b=this.model.getPosition(),c=this.model.getSize(),a.attr({x:b.x}),a.attr({y:b.y}),a.attr({width:c.width}),a.attr({height:c.height}),a.attr({transform:this.model.getTransformString()||null})},b.prototype.cloneElement=function(a){var b;return null==a&&(a=this.svgDocument),b=a.rect(),this.render(b),b},b.prototype.onModelChange=function(){return this.render(),this.emit("change",this)},b.prototype._setupSVGObject=function(a){return this.svgEl=a,this.svgEl||(this.svgEl=this.svgDocument.rect().attr(c)),k.setObjectOnNode(this.svgEl.node,this),this.updateFromAttributes()},b}(d)}).call(this)},{"./point":14,"./size":20,"./transform":23,"./utils":24,events:25}],17:[function(a,b,c){(function(){var c,d,e=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},f={}.hasOwnProperty;c=a("events").EventEmitter,b.exports=d=function(a){function b(){this.preselected=null,this.selected=null,this.selectedNode=null}return e(b,a),b.prototype.setPreselected=function(a){var b;if(a!==this.preselected&&(!a||a!==this.selected))return b=this.preselected,this.preselected=a,this.emit("change:preselected",{object:this.preselected,old:b})},b.prototype.setSelected=function(a){var b;if(a!==this.selected)return b=this.selected,this.selected=a,this.preselected===a&&this.setPreselected(null),this.emit("change:selected",{object:this.selected,old:b})},b.prototype.setSelectedNode=function(a){var b;if(a!==this.selectedNode)return b=this.selectedNode,this.selectedNode=a,this.emit("change:selectedNode",{node:this.selectedNode,old:b})},b.prototype.clearSelected=function(){return this.setSelected(null)},b.prototype.clearPreselected=function(){return this.setPreselected(null)},b.prototype.clearSelectedNode=function(){return this.setSelectedNode(null)},b}(c)}).call(this)},{events:25}],18:[function(a,b,c){(function(){var c,d,e=function(a,b){return function(){return a.apply(b,arguments)}};c=a("./object-selection"),b.exports=d=function(){function a(a,b){this.svgDocument=a,this.model=b,this.onChangePreselected=e(this.onChangePreselected,this),this.onChangeSelected=e(this.onChangeSelected,this),this.objectSelection=new c(this.svgDocument),this.objectPreselection=new c(this.svgDocument,{"class":"object-preselection"}),this.model.on("change:selected",this.onChangeSelected),this.model.on("change:preselected",this.onChangePreselected)}return a.prototype.getObjectSelection=function(){return this.objectSelection},a.prototype.onChangeSelected=function(a){var b,c;return b=a.object,c=a.old,this.objectSelection.setObject(b)},a.prototype.onChangePreselected=function(a){var b;return b=a.object,this.objectPreselection.setObject(b)},a}()}).call(this)},{"./object-selection":9}],19:[function(a,b,c){(function(){var c;c=a("../vendor/svg"),c=a("../vendor/svg.export"),b.exports=function(a,b){return a.exportSvg(b)}}).call(this)},{"../vendor/svg":27,"../vendor/svg.export":26}],20:[function(a,b,c){(function(){var a;b.exports=a=function(){function a(a,b){this.set(a,b)}return a.create=function(b,c){return b instanceof a?b:Array.isArray(b)?new a(b[0],b[1]):new a(b,c)},a.prototype.set=function(a,b){var c;return this.width=a,this.height=b,Array.isArray(this.width)?(c=this.width,this.width=c[0],this.height=c[1],c):void 0},a.prototype.toArray=function(){return[this.width,this.height]},a.prototype.equals=function(b){return b=a.create(b),b.width===this.width&&b.height===this.height},a.prototype.toString=function(){return"("+this.width+", "+this.height+")"},a}()}).call(this)},{}],21:[function(a,b,c){(function(){var c,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},h={}.hasOwnProperty;c=a("events").EventEmitter,d=a("./point"),b.exports=e=function(a){function b(a){var b,c;c=null!=a?a:{},this.path=c.path,this.closed=c.closed,b=c.nodes,this.onNodeChange=f(this.onNodeChange,this),this.nodes=[],this.setNodes(b),this.closed=!!this.closed}return g(b,a),b.prototype.toString=function(){return"Subpath "+this.toPathString()},b.prototype.toPathString=function(){var a,b,c,d,e,f,g,h,i;for(h="",d=null,f=function(a,b){var c;return c="",a.handleOut||b.handleIn?(c=[],c=c.concat(a.getAbsoluteHandleOut().toArray()),c=c.concat(b.getAbsoluteHandleIn().toArray()),c=c.concat(b.point.toArray()),c="C"+c.join(",")):c=a.point.x===b.point.x?"V"+b.point.y:a.point.y===b.point.y?"H"+b.point.x:"L"+b.point.toArray().join(","),c},a=function(a,b){var c;return a&&b?(c="",(b.handleOut||a.handleIn)&&(c+=f(b,a)),c+="Z"):""},i=this.nodes,b=0,e=i.length;e>b;b++)g=i[b],h+=h?f(c,g):"M"+g.point.toArray().join(","),c=g;return this.closed&&(h+=a(this.nodes[0],this.nodes[this.nodes.length-1])),h},b.prototype.getNodes=function(){return this.nodes},b.prototype.setNodes=function(a){var b,c,d,e,f,g;if(a&&Array.isArray(a)){for(g=this.nodes,b=0,d=g.length;d>b;b++)f=g[b],this._unbindNode(f);for(c=0,e=a.length;e>c;c++)f=a[c],this._bindNode(f);return this.nodes=a,this.emit("change",this)}},b.prototype.addNode=function(a){return this.insertNode(a,this.nodes.length)},b.prototype.insertNode=function(a,b){return this._bindNode(a),this.nodes.splice(b,0,a),this.emit("insert:node",this,{subpath:this,index:b,node:a}),this.emit("change",this)},b.prototype.close=function(){return this.closed=!0,this.emit("change",this)},b.prototype.translate=function(a){var b,c,e,f;for(a=d.create(a),f=this.nodes,b=0,c=f.length;c>b;b++)e=f[b],e.translate(a)},b.prototype.onNodeChange=function(){return this.emit("change",this)},b.prototype._bindNode=function(a){return a.setPath(this.path),a.on("change",this.onNodeChange)},b.prototype._unbindNode=function(a){return a.setPath(null),a.removeListener("change",this.onNodeChange)},b.prototype._findNodeIndex=function(a){var b,c,d;for(b=c=0,d=this.nodes.length;d>=0?d>c:c>d;b=d>=0?++c:--c)if(this.nodes[b]===a)return b;return-1},b}(c)}).call(this)},{"./point":14,events:25}],22:[function(a,b,c){(function(){var c,d,e,f,g,h,i;e=a("../vendor/svg"),g=a("./selection-model"),h=a("./selection-view"),d=a("./pointer-tool"),i=a("./serialize-svg"),c=a("./deserialize-svg"),b.exports=f=function(){function a(a){this.objects=[],this.svgDocument=e(a),this.toolLayer=this.svgDocument.group(),this.toolLayer.node.setAttribute("class","tool-layer"),this.selectionModel=new g,this.selectionView=new h(this.toolLayer,this.selectionModel),this.tool=new d(this.svgDocument,{selectionModel:this.selectionModel,selectionView:this.selectionView,toolLayer:this.toolLayer}),this.tool.activate()}return a.prototype.deserialize=function(a){return this.objects=c(this.svgDocument,a),this.toolLayer.front()},a.prototype.serialize=function(){var a;return a=this.getSvgRoot(),a?i(a,{whitespace:!0}):""},a.prototype.getSvgRoot=function(){var a;return a=null,this.svgDocument.each(function(){return"svg"===this.node.nodeName?a=this:void 0}),a},a}()}).call(this)},{"../vendor/svg":27,"./deserialize-svg":3,"./pointer-tool":15,"./selection-model":17,"./selection-view":18,"./serialize-svg":19}],23:[function(a,b,c){(function(){var c,d,e;d=a("../vendor/svg"),c=a("./point"),b.exports=e=function(){function a(){this.matrix=null,this.transformString=""}return a.prototype.setTransformString=function(a){var b,c,e;if(null==a&&(a=""),this.transformString===a)return!1;if(this.transformString=a,c=d.parse.transform(a),this.matrix=null,c)if(this.matrix=d.parser.draw.node.createSVGMatrix(),null!=c.x)this.matrix=this.matrix.translate(c.x,c.y);else if(null!=c.a)for(b in c)e=c[b],this.matrix[b]=c[b];else this.matrix=null;return!0},a.prototype.toString=function(){return this.transformString},a.prototype.transformPoint=function(a){var b;return a=c.create(a),this.matrix?(b=d.parser.draw.node.createSVGPoint(),b.x=a.x,b.y=a.y,b=b.matrixTransform(this.matrix),c.create(b.x,b.y)):a},a}()}).call(this)},{"../vendor/svg":27,"./point":14}],24:[function(a,b,c){arguments[4][1][0].apply(c,arguments)},{"./point":14,dup:1}],25:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];c.apply(this,f)}else if(g(c)){for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];for(j=c.slice(),d=j.length,i=0;d>i;i++)j[i].apply(this,f)}return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned){var c;c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(0>d)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?e(a._events[b])?1:a._events[b].length:0}},{}],26:[function(a,b,c){(function(){function a(a,b,c){if(b){var d="",e=b===!0?"  ":b||"";for(i=c-1;i>=0;i--)d+=e;a=d+a+"\n"}return a}var b=function(a){return 0==a.indexOf("Svgjs")};SVG.extend(SVG.Element,{exportSvg:function(b,c){var d,e,f,g,h,i,j=this.node.nodeName,k="";if(b=b||{},null==b.exclude||!b.exclude.call(this)){b=b||{},c=c||0;var l="svg"==this.node.nodeName;if(l&&(k+=a('<?xml version="1.0" encoding="UTF-8"?>',b.whitespace,c),f=this.attr("width"),g=this.attr("height"),b.width&&this.attr("width",b.width),b.height&&this.attr("height",b.height)),k+=a("<"+j+this.attrToString()+">",b.whitespace,c),l&&(this.attr({width:f,height:g}),k+=a("<desc>Created with Curve</desc>",b.whitespace,c+1),this.defs().first()&&(k+=this.defs().exportSvg(b,c+1))),this instanceof SVG.Parent)for(d=0,e=this.children().length;e>d;d++)SVG.Absorbee&&this.children()[d]instanceof SVG.Absorbee?(i=this.children()[d].node.cloneNode(!0),h=document.createElement("div"),h.appendChild(i),k+=h.innerHTML):k+=this.children()[d].exportSvg(b,c+1);else if(this instanceof SVG.Text||this instanceof SVG.Tspan)for(d=0,e=this.node.childNodes.length;e>d;d++)k+=this.node.childNodes[d].instance instanceof SVG.TSpan?this.node.childNodes[d].instance.exportSvg(b,c+1):this.node.childNodes[d].nodeValue.replace(/&/g,"&amp;");else SVG.ComponentTransferEffect&&this instanceof SVG.ComponentTransferEffect&&this.rgb.each(function(){k+=this.exportSvg(b,c+1)});k+=a("</"+j+">",b.whitespace,c)}return k},exportAttr:function(a){return 0==arguments.length?this.data("svg-export-attr"):this.data("svg-export-attr",a)},attrToString:function(){var a,c,d=[],e=this.exportAttr(),f=this.attr();if("object"==typeof e)for(a in e)"data-svg-export-attr"!=a&&(f[a]=e[a]);for(a in f)c=f[a],("transform"!=a||"matrix(1,0,0,1,0,0)"!=c)&&("id"==a&&b(c)||("xlink"==a?a="xmlns:xlink":"href"==a&&(f["xlink:href"]||(a="xlink:href")),"string"==typeof c&&(c=c.replace(/"/g,"'")),"data-svg-export-attr"!=a&&"href"!=a&&("stroke"!=a||parseFloat(f["stroke-width"])>0)&&d.push(a+'="'+c+'"')));return d.length?" "+d.join(" "):""}})}).call(this)},{}],27:[function(b,c,d){!function(e,f){"function"==typeof a&&a.amd?a(f):"object"==typeof d?c.exports=f(b,d,c):e.SVG=f()}(this,function(a,b,c){function d(a){return a.toLowerCase().replace(/-(.)/g,function(a,b){return b.toUpperCase()})}function e(a){return a.charAt(0).toUpperCase()+a.slice(1)}function f(a){return 4==a.length?["#",a.substring(1,2),a.substring(1,2),a.substring(2,3),a.substring(2,3),a.substring(3,4),a.substring(3,4)].join(""):a}function g(a){var b=a.toString(16);return 1==b.length?"0"+b:b}function h(a,b,c){return null==c?c=a.height/a.width*b:null==b&&(b=a.width/a.height*c),{width:b,height:c}}function i(a,b,c){return{x:b*a.a+c*a.c+0,y:b*a.b+c*a.d+0}}function j(a){return{a:a[0],b:a[1],c:a[2],d:a[3],e:a[4],f:a[5]}}function k(a){return a instanceof s.Matrix||(a=new s.Matrix(a)),a}function l(a,b){a.cx=null==a.cx?b.bbox().cx:a.cx,a.cy=null==a.cy?b.bbox().cy:a.cy}function m(a){return a=a.replace(s.regex.whitespace,"").replace(s.regex.matrix,"").split(","),j(s.utils.map(a,function(a){return parseFloat(a)}))}function n(a,b){return"number"==typeof a.from?a.from+(a.to-a.from)*b:a instanceof s.Color||a instanceof s.Number||a instanceof s.Matrix?a.at(b):1>b?a.from:a.to}function o(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b][0],null!=a[b][1]&&(d+=a[b][1],null!=a[b][2]&&(d+=" ",d+=a[b][2],null!=a[b][3]&&(d+=" ",d+=a[b][3],d+=" ",d+=a[b][4],null!=a[b][5]&&(d+=" ",d+=a[b][5],d+=" ",d+=a[b][6],null!=a[b][7]&&(d+=" ",d+=a[b][7])))));return d+" "}function p(a){for(var b=a.childNodes.length-1;b>=0;b--)a.childNodes[b]instanceof SVGElement&&p(a.childNodes[b]);return s.adopt(a).id(s.eid(a.nodeName))}function q(a){return null==a.x&&(a.x=0,a.y=0,a.width=0,a.height=0),a.w=a.width,a.h=a.height,a.x2=a.x+a.width,a.y2=a.y+a.height,a.cx=a.x+a.width/2,a.cy=a.y+a.height/2,a}function r(a){var b=a.toString().match(s.regex.reference);return b?b[1]:void 0}var s=this.SVG=function(a){return s.supported?(a=new s.Doc(a),s.parser||s.prepare(a),a):void 0};if(s.ns="http://www.w3.org/2000/svg",s.xmlns="http://www.w3.org/2000/xmlns/",s.xlink="http://www.w3.org/1999/xlink",s.supported=function(){return!!document.createElementNS&&!!document.createElementNS(s.ns,"svg").createSVGRect}(),!s.supported)return!1;s.did=1e3,s.eid=function(a){return"Svgjs"+e(a)+s.did++},s.create=function(a){var b=document.createElementNS(this.ns,a);return b.setAttribute("id",this.eid(a)),b},s.extend=function(){var a,b,c,d;for(a=[].slice.call(arguments),b=a.pop(),d=a.length-1;d>=0;d--)if(a[d])for(c in b)a[d].prototype[c]=b[c];s.Set&&s.Set.inherit&&s.Set.inherit()},s.invent=function(a){var b="function"==typeof a.create?a.create:function(){this.constructor.call(this,s.create(a.create))};return a.inherit&&(b.prototype=new a.inherit),a.extend&&s.extend(b,a.extend),a.construct&&s.extend(a.parent||s.Container,a.construct),b},s.adopt=function(a){if(a.instance)return a.instance;var b;return b="svg"==a.nodeName?a.parentNode instanceof SVGElement?new s.Nested:new s.Doc:"lineairGradient"==a.nodeName?new s.Gradient("lineair"):"radialGradient"==a.nodeName?new s.Gradient("radial"):s[e(a.nodeName)]?new(s[e(a.nodeName)]):new s.Element(a),b.type=a.nodeName,b.node=a,a.instance=b,b instanceof s.Doc&&b.namespace().defs(),b},s.prepare=function(a){var b=document.getElementsByTagName("body")[0],c=(b?new s.Doc(b):a.nested()).size(2,0),d=s.create("path");c.node.appendChild(d),s.parser={body:b||a.parent(),draw:c.style("opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),poly:c.polyline().node,path:d}},s.regex={unit:/^(-?[\d\.]+)([a-z%]{0,2})$/,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,matrix:/matrix\(|\)/g,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^-?[\d\.]+$/,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i},s.utils={map:function(a,b){var c,d=a.length,e=[];for(c=0;d>c;c++)e.push(b(a[c]));return e},radians:function(a){return a%360*Math.PI/180},degrees:function(a){return 180*a/Math.PI%360},filterSVGElements:function(a){return[].filter.call(a,function(a){return a instanceof SVGElement})}},s.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},s.Color=function(a){var b;this.r=0,this.g=0,this.b=0,"string"==typeof a?s.regex.isRgb.test(a)?(b=s.regex.rgb.exec(a.replace(/\s/g,"")),this.r=parseInt(b[1]),this.g=parseInt(b[2]),this.b=parseInt(b[3])):s.regex.isHex.test(a)&&(b=s.regex.hex.exec(f(a)),this.r=parseInt(b[1],16),this.g=parseInt(b[2],16),this.b=parseInt(b[3],16)):"object"==typeof a&&(this.r=a.r,this.g=a.g,this.b=a.b)},s.extend(s.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+g(this.r)+g(this.g)+g(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(a){return this.destination=new s.Color(a),this},at:function(a){return this.destination?(a=0>a?0:a>1?1:a,new s.Color({r:~~(this.r+(this.destination.r-this.r)*a),g:~~(this.g+(this.destination.g-this.g)*a),b:~~(this.b+(this.destination.b-this.b)*a)})):this}}),s.Color.test=function(a){return a+="",s.regex.isHex.test(a)||s.regex.isRgb.test(a)},s.Color.isRgb=function(a){return a&&"number"==typeof a.r&&"number"==typeof a.g&&"number"==typeof a.b},s.Color.isColor=function(a){return s.Color.isRgb(a)||s.Color.test(a)},s.Array=function(a,b){a=(a||[]).valueOf(),0==a.length&&b&&(a=b.valueOf()),this.value=this.parse(a)},s.extend(s.Array,{morph:function(a){if(this.destination=this.parse(a),this.value.length!=this.destination.length){for(var b=this.value[this.value.length-1],c=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(c);for(;this.value.length<this.destination.length;)this.value.push(b)}return this},settle:function(){for(var a=0,b=this.value.length,c=[];b>a;a++)-1==c.indexOf(this.value[a])&&c.push(this.value[a]);return this.value=c},at:function(a){if(!this.destination)return this;for(var b=0,c=this.value.length,d=[];c>b;b++)d.push(this.value[b]+(this.destination[b]-this.value[b])*a);return new s.Array(d)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(a){return a=a.valueOf(),Array.isArray(a)?a:this.split(a)},split:function(a){return a.trim().split(/\s+/)},reverse:function(){return this.value.reverse(),this}}),s.PointArray=function(a,b){this.constructor.call(this,a,b||[[0,0]])},s.PointArray.prototype=new s.Array,s.extend(s.PointArray,{toString:function(){for(var a=0,b=this.value.length,c=[];b>a;a++)c.push(this.value[a].join(","));return c.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(a){if(!this.destination)return this;for(var b=0,c=this.value.length,d=[];c>b;b++)d.push([this.value[b][0]+(this.destination[b][0]-this.value[b][0])*a,this.value[b][1]+(this.destination[b][1]-this.value[b][1])*a]);return new s.PointArray(d)},parse:function(a){if(a=a.valueOf(),Array.isArray(a))return a;a=this.split(a);for(var b,c=0,d=a.length,e=[];d>c;c++)b=a[c].split(","),e.push([parseFloat(b[0]),parseFloat(b[1])]);return e},move:function(a,b){var c=this.bbox();if(a-=c.x,b-=c.y,!isNaN(a)&&!isNaN(b))for(var d=this.value.length-1;d>=0;d--)this.value[d]=[this.value[d][0]+a,this.value[d][1]+b];return this},size:function(a,b){var c,d=this.bbox();for(c=this.value.length-1;c>=0;c--)this.value[c][0]=(this.value[c][0]-d.x)*a/d.width+d.x,this.value[c][1]=(this.value[c][1]-d.y)*b/d.height+d.y;return this},bbox:function(){return s.parser.poly.setAttribute("points",this.toString()),s.parser.poly.getBBox()}}),s.PathArray=function(a,b){this.constructor.call(this,a,b||[["M",0,0]])},s.PathArray.prototype=new s.Array,s.extend(s.PathArray,{toString:function(){return o(this.value)},move:function(a,b){var c=this.bbox();if(a-=c.x,b-=c.y,!isNaN(a)&&!isNaN(b))for(var d,e=this.value.length-1;e>=0;e--)d=this.value[e][0],"M"==d||"L"==d||"T"==d?(this.value[e][1]+=a,this.value[e][2]+=b):"H"==d?this.value[e][1]+=a:"V"==d?this.value[e][1]+=b:"C"==d||"S"==d||"Q"==d?(this.value[e][1]+=a,this.value[e][2]+=b,this.value[e][3]+=a,this.value[e][4]+=b,"C"==d&&(this.value[e][5]+=a,this.value[e][6]+=b)):"A"==d&&(this.value[e][6]+=a,this.value[e][7]+=b);return this},size:function(a,b){var c,d,e=this.bbox();for(c=this.value.length-1;c>=0;c--)d=this.value[c][0],"M"==d||"L"==d||"T"==d?(this.value[c][1]=(this.value[c][1]-e.x)*a/e.width+e.x,this.value[c][2]=(this.value[c][2]-e.y)*b/e.height+e.y):"H"==d?this.value[c][1]=(this.value[c][1]-e.x)*a/e.width+e.x:"V"==d?this.value[c][1]=(this.value[c][1]-e.y)*b/e.height+e.y:"C"==d||"S"==d||"Q"==d?(this.value[c][1]=(this.value[c][1]-e.x)*a/e.width+e.x,this.value[c][2]=(this.value[c][2]-e.y)*b/e.height+e.y,this.value[c][3]=(this.value[c][3]-e.x)*a/e.width+e.x,this.value[c][4]=(this.value[c][4]-e.y)*b/e.height+e.y,"C"==d&&(this.value[c][5]=(this.value[c][5]-e.x)*a/e.width+e.x,this.value[c][6]=(this.value[c][6]-e.y)*b/e.height+e.y)):"A"==d&&(this.value[c][1]=this.value[c][1]*a/e.width,this.value[c][2]=this.value[c][2]*b/e.height,this.value[c][6]=(this.value[c][6]-e.x)*a/e.width+e.x,this.value[c][7]=(this.value[c][7]-e.y)*b/e.height+e.y);return this},parse:function(a){if(a instanceof s.PathArray)return a.valueOf();var b,c,d,e,f,g,h,i,j,k,l,m=0,n=0;for(s.parser.path.setAttribute("d","string"==typeof a?a:o(a)),l=s.parser.path.pathSegList,b=0,c=l.numberOfItems;c>b;++b)k=l.getItem(b),j=k.pathSegTypeAsLetter,"M"==j||"L"==j||"H"==j||"V"==j||"C"==j||"S"==j||"Q"==j||"T"==j||"A"==j?("x"in k&&(m=k.x),"y"in k&&(n=k.y)):("x1"in k&&(f=m+k.x1),"x2"in k&&(h=m+k.x2),"y1"in k&&(g=n+k.y1),"y2"in k&&(i=n+k.y2),"x"in k&&(m+=k.x),"y"in k&&(n+=k.y),"m"==j?l.replaceItem(s.parser.path.createSVGPathSegMovetoAbs(m,n),b):"l"==j?l.replaceItem(s.parser.path.createSVGPathSegLinetoAbs(m,n),b):"h"==j?l.replaceItem(s.parser.path.createSVGPathSegLinetoHorizontalAbs(m),b):"v"==j?l.replaceItem(s.parser.path.createSVGPathSegLinetoVerticalAbs(n),b):"c"==j?l.replaceItem(s.parser.path.createSVGPathSegCurvetoCubicAbs(m,n,f,g,h,i),b):"s"==j?l.replaceItem(s.parser.path.createSVGPathSegCurvetoCubicSmoothAbs(m,n,h,i),b):"q"==j?l.replaceItem(s.parser.path.createSVGPathSegCurvetoQuadraticAbs(m,n,f,g),b):"t"==j?l.replaceItem(s.parser.path.createSVGPathSegCurvetoQuadraticSmoothAbs(m,n),b):"a"==j?l.replaceItem(s.parser.path.createSVGPathSegArcAbs(m,n,k.r1,k.r2,k.angle,k.largeArcFlag,k.sweepFlag),b):("z"==j||"Z"==j)&&(m=d,n=e)),("M"==j||"m"==j)&&(d=m,e=n);for(a=[],l=s.parser.path.pathSegList,b=0,c=l.numberOfItems;c>b;++b)k=l.getItem(b),j=k.pathSegTypeAsLetter,m=[j],"M"==j||"L"==j||"T"==j?m.push(k.x,k.y):"H"==j?m.push(k.x):"V"==j?m.push(k.y):"C"==j?m.push(k.x1,k.y1,k.x2,k.y2,k.x,k.y):"S"==j?m.push(k.x2,k.y2,k.x,k.y):"Q"==j?m.push(k.x1,k.y1,k.x,k.y):"A"==j&&m.push(k.r1,k.r2,k.angle,0|k.largeArcFlag,0|k.sweepFlag,k.x,k.y),a.push(m);return a},bbox:function(){return s.parser.path.setAttribute("d",this.toString()),s.parser.path.getBBox()}}),s.Number=s.invent({create:function(a,b){this.value=0,this.unit=b||"","number"==typeof a?this.value=isNaN(a)?0:isFinite(a)?a:0>a?-3.4e38:3.4e38:"string"==typeof a?(b=a.match(s.regex.unit),b&&(this.value=parseFloat(b[1]),"%"==b[2]?this.value/=100:"s"==b[2]&&(this.value*=1e3),this.unit=b[2])):a instanceof s.Number&&(this.value=a.valueOf(),this.unit=a.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},valueOf:function(){return this.value},plus:function(a){return new s.Number(this+new s.Number(a),this.unit)},minus:function(a){return this.plus(-new s.Number(a))},times:function(a){return new s.Number(this*new s.Number(a),this.unit)},divide:function(a){return new s.Number(this/new s.Number(a),this.unit)},to:function(a){var b=new s.Number(this);return"string"==typeof a&&(b.unit=a),b},morph:function(a){return this.destination=new s.Number(a),this},at:function(a){return this.destination?new s.Number(this.destination).minus(this).times(a).plus(this):this}}}),s.ViewBox=function(a){var b,c,d,e,f=1,g=1,h=a.bbox(),i=(a.attr("viewBox")||"").match(/-?[\d\.]+/g),j=a,k=a;for(d=new s.Number(a.width()),e=new s.Number(a.height());"%"==d.unit;)f*=d.value,d=new s.Number(j instanceof s.Doc?j.parent().offsetWidth:j.parent().width()),j=j.parent();for(;"%"==e.unit;)g*=e.value,e=new s.Number(k instanceof s.Doc?k.parent().offsetHeight:k.parent().height()),k=k.parent();this.x=h.x,this.y=h.y,this.width=d*f,this.height=e*g,this.zoom=1,i&&(b=parseFloat(i[0]),c=parseFloat(i[1]),d=parseFloat(i[2]),e=parseFloat(i[3]),this.zoom=this.width/this.height>d/e?this.height/e:this.width/d,this.x=b,this.y=c,this.width=d,this.height=e)},s.extend(s.ViewBox,{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height}}),s.Element=s.invent({create:function(a){this._stroke=s.defaults.attrs.stroke,(this.node=a)&&(this.type=a.nodeName,this.node.instance=this,this._stroke=a.getAttribute("stroke")||this._stroke)},extend:{x:function(a){return this.attr("x",a)},y:function(a){return this.attr("y",a)},cx:function(a){return null==a?this.x()+this.width()/2:this.x(a-this.width()/2)},cy:function(a){return null==a?this.y()+this.height()/2:this.y(a-this.height()/2)},move:function(a,b){return this.x(a).y(b)},center:function(a,b){return this.cx(a).cy(b)},width:function(a){return this.attr("width",a)},height:function(a){return this.attr("height",a)},size:function(a,b){var c=h(this.bbox(),a,b);return this.width(new s.Number(c.width)).height(new s.Number(c.height))},clone:function(){var a=p(this.node.cloneNode(!0));return this.after(a),a},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(a){return this.after(a).remove(),a},addTo:function(a){return a.put(this)},putIn:function(a){return a.add(this)},id:function(a){return this.attr("id",a)},inside:function(a,b){var c=this.bbox();return a>c.x&&b>c.y&&a<c.x+c.width&&b<c.y+c.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var a=this.attr("class");return null==a?[]:a.trim().split(/\s+/)},hasClass:function(a){return-1!=this.classes().indexOf(a)},addClass:function(a){if(!this.hasClass(a)){var b=this.classes();b.push(a),this.attr("class",b.join(" "))}return this},removeClass:function(a){return this.hasClass(a)&&this.attr("class",this.classes().filter(function(b){return b!=a}).join(" ")),this},toggleClass:function(a){return this.hasClass(a)?this.removeClass(a):this.addClass(a)},reference:function(a){return s.get(this.attr(a))},parent:function(a){if(this.node.parentNode){var b=s.adopt(this.node.parentNode);if(a)for(;!(b instanceof a)&&b.node.parentNode instanceof SVGElement;)b=s.adopt(b.node.parentNode);return b}},doc:function(a){return this instanceof s.Doc?this:this.parent(s.Doc)},"native":function(){return this.node},svg:function(a){var b=document.createElement("svg");if(!(a&&this instanceof s.Parent))return b.appendChild(a=document.createElement("svg")),a.appendChild(this.node.cloneNode(!0)),b.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");b.innerHTML="<svg>"+a.replace(/\n/,"").replace(/<(\w+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var c=0,d=b.firstChild.childNodes.length;d>c;c++)this.node.appendChild(b.firstChild.firstChild);return this}}}),s.FX=s.invent({
create:function(a){this.target=a},extend:{animate:function(a,b,c){var d,e,f,g=this.target,h=this;return"object"==typeof a&&(c=a.delay,b=a.ease,a=a.duration),a="="==a?a:null==a?1e3:new s.Number(a).valueOf(),b=b||"<>",h.at=function(a){var c;if(a=0>a?0:a>1?1:a,null==d){d=[];for(f in h.attrs)d.push(f);if(g.morphArray&&(h.destination.plot||d.indexOf("points")>-1)){var i,j=new g.morphArray(h.destination.plot||h.attrs.points||g.array());h.destination.size&&j.size(h.destination.size.width.to,h.destination.size.height.to),i=j.bbox(),h.destination.x?j.move(h.destination.x.to,i.y):h.destination.cx&&j.move(h.destination.cx.to-i.width/2,i.y),i=j.bbox(),h.destination.y?j.move(i.x,h.destination.y.to):h.destination.cy&&j.move(i.x,h.destination.cy.to-i.height/2),h.destination={plot:g.array().morph(j)}}}if(null==e){e=[];for(f in h.styles)e.push(f)}for(a="<>"==b?-Math.cos(a*Math.PI)/2+.5:">"==b?Math.sin(a*Math.PI/2):"<"==b?-Math.cos(a*Math.PI/2)+1:"-"==b?a:"function"==typeof b?b(a):a,h.destination.plot?g.plot(h.destination.plot.at(a)):(h.destination.x?g.x(h.destination.x.at(a)):h.destination.cx&&g.cx(h.destination.cx.at(a)),h.destination.y?g.y(h.destination.y.at(a)):h.destination.cy&&g.cy(h.destination.cy.at(a)),h.destination.size&&g.size(h.destination.size.width.at(a),h.destination.size.height.at(a))),h.destination.viewbox&&g.viewbox(h.destination.viewbox.x.at(a),h.destination.viewbox.y.at(a),h.destination.viewbox.width.at(a),h.destination.viewbox.height.at(a)),h.destination.leading&&g.leading(h.destination.leading.at(a)),c=d.length-1;c>=0;c--)g.attr(d[c],n(h.attrs[d[c]],a));for(c=e.length-1;c>=0;c--)g.style(e[c],n(h.styles[e[c]],a));h.situation.during&&h.situation.during.call(g,a,function(b,c){return n({from:b,to:c},a)})},"number"==typeof a&&(this.timeout=setTimeout(function(){var d=(new Date).getTime();h.situation.start=d,h.situation.play=!0,h.situation.finish=d+a,h.situation.duration=a,h.situation.ease=b,h.render=function(){if(h.situation.play===!0){var d=(new Date).getTime(),e=d>h.situation.finish?1:(d-h.situation.start)/a;h.situation.reversing&&(e=-e+1),h.at(e),d>h.situation.finish?(h.destination.plot&&g.plot(new s.PointArray(h.destination.plot.destination).settle()),h.situation.loop===!0||"number"==typeof h.situation.loop&&h.situation.loop>0?(h.situation.reverse&&(h.situation.reversing=!h.situation.reversing),"number"==typeof h.situation.loop&&((!h.situation.reverse||h.situation.reversing)&&--h.situation.loop,h.situation.reverse||1!=h.situation.loop||--h.situation.loop),h.animate(a,b,c)):h.situation.after?h.situation.after.apply(g,[h]):h.stop()):h.animationFrame=requestAnimationFrame(h.render)}else h.animationFrame=requestAnimationFrame(h.render)},h.render()},new s.Number(c).valueOf())),this},bbox:function(){return this.target.bbox()},attr:function(a,b){if("object"==typeof a)for(var c in a)this.attr(c,a[c]);else{var d=this.target.attr(a);"transform"==a?(this.attrs[a]&&(b=this.attrs[a].destination.multiply(b)),this.attrs[a]=this.target.ctm().morph(b),this.param&&(b=this.target.transform("rotation"),this.attrs[a].param={from:this.target.param||{rotation:b,cx:this.param.cx,cy:this.param.cy},to:this.param})):this.attrs[a]=s.Color.isColor(b)?new s.Color(d).morph(b):s.regex.unit.test(b)?new s.Number(d).morph(b):{from:d,to:b}}return this},style:function(a,b){if("object"==typeof a)for(var c in a)this.style(c,a[c]);else this.styles[a]={from:this.target.style(a),to:b};return this},x:function(a){return this.destination.x=new s.Number(this.target.x()).morph(a),this},y:function(a){return this.destination.y=new s.Number(this.target.y()).morph(a),this},cx:function(a){return this.destination.cx=new s.Number(this.target.cx()).morph(a),this},cy:function(a){return this.destination.cy=new s.Number(this.target.cy()).morph(a),this},move:function(a,b){return this.x(a).y(b)},center:function(a,b){return this.cx(a).cy(b)},size:function(a,b){if(this.target instanceof s.Text)this.attr("font-size",a);else{var c=this.target.bbox();this.destination.size={width:new s.Number(c.width).morph(a),height:new s.Number(c.height).morph(b)}}return this},plot:function(a){return this.destination.plot=a,this},leading:function(a){return this.target.destination.leading&&(this.destination.leading=new s.Number(this.target.destination.leading).morph(a)),this},viewbox:function(a,b,c,d){if(this.target instanceof s.Container){var e=this.target.viewbox();this.destination.viewbox={x:new s.Number(e.x).morph(a),y:new s.Number(e.y).morph(b),width:new s.Number(e.width).morph(c),height:new s.Number(e.height).morph(d)}}return this},update:function(a){return this.target instanceof s.Stop&&(null!=a.opacity&&this.attr("stop-opacity",a.opacity),null!=a.color&&this.attr("stop-color",a.color),null!=a.offset&&this.attr("offset",new s.Number(a.offset))),this},during:function(a){return this.situation.during=a,this},after:function(a){return this.situation.after=a,this},loop:function(a,b){return this.situation.loop=this.situation.loops=a||!0,this.situation.reverse=!!b,this},stop:function(a){return a===!0?(this.animate(0),this.situation.after&&this.situation.after.apply(this.target,[this])):(clearTimeout(this.timeout),cancelAnimationFrame(this.animationFrame),this.attrs={},this.styles={},this.situation={},this.destination={}),this},pause:function(){return this.situation.play===!0&&(this.situation.play=!1,this.situation.pause=(new Date).getTime()),this},play:function(){if(this.situation.play===!1){var a=(new Date).getTime()-this.situation.pause;this.situation.finish+=a,this.situation.start+=a,this.situation.play=!0}return this}},parent:s.Element,construct:{animate:function(a,b,c){return(this.fx||(this.fx=new s.FX(this))).stop().animate(a,b,c)},stop:function(a){return this.fx&&this.fx.stop(a),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this}}}),s.BBox=s.invent({create:function(a){if(a){var b;try{b=a.node.getBBox()}catch(c){b={x:a.node.clientLeft,y:a.node.clientTop,width:a.node.clientWidth,height:a.node.clientHeight}}this.x=b.x,this.y=b.y,this.width=b.width,this.height=b.height}q(this)},parent:s.Element,construct:{bbox:function(){return new s.BBox(this)}}}),s.TBox=s.invent({create:function(a){if(a){var b=a.ctm().extract(),c=a.bbox();this.width=c.width*b.scaleX,this.height=c.height*b.scaleY,this.x=c.x+b.x,this.y=c.y+b.y}q(this)},parent:s.Element,construct:{tbox:function(){return new s.TBox(this)}}}),s.RBox=s.invent({create:function(a){if(a){var b=a.doc().parent(),c=a.node.getBoundingClientRect(),d=1;for(this.x=c.left,this.y=c.top,this.x-=b.offsetLeft,this.y-=b.offsetTop;b=b.offsetParent;)this.x-=b.offsetLeft,this.y-=b.offsetTop;for(b=a;b.parent&&(b=b.parent());)b.viewbox&&(d*=b.viewbox().zoom,this.x-=b.x()||0,this.y-=b.y()||0);this.width=c.width/=d,this.height=c.height/=d}q(this),this.x+=window.scrollX,this.y+=window.scrollY},parent:s.Element,construct:{rbox:function(){return new s.RBox(this)}}}),[s.BBox,s.TBox,s.RBox].forEach(function(a){s.extend(a,{merge:function(b){var c=new a;return c.x=Math.min(this.x,b.x),c.y=Math.min(this.y,b.y),c.width=Math.max(this.x+this.width,b.x+b.width)-c.x,c.height=Math.max(this.y+this.height,b.y+b.height)-c.y,q(c)}})}),s.Matrix=s.invent({create:function(a){var b,c=j([1,0,0,1,0,0]);for(a=a instanceof s.Element?a.matrixify():"string"==typeof a?m(a):6==arguments.length?j([].slice.call(arguments)):"object"==typeof a?a:c,b=u.length-1;b>=0;b--)this[u[b]]=a&&"number"==typeof a[u[b]]?a[u[b]]:c[u[b]]},extend:{extract:function(){var a=i(this,0,1),b=i(this,1,0),c=180/Math.PI*Math.atan2(a.y,a.x)-90;return{x:this.e,y:this.f,skewX:-c,skewY:180/Math.PI*Math.atan2(b.y,b.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:c}},clone:function(){return new s.Matrix(this)},morph:function(a){return this.destination=new s.Matrix(a),this},at:function(a){if(!this.destination)return this;var b=new s.Matrix({a:this.a+(this.destination.a-this.a)*a,b:this.b+(this.destination.b-this.b)*a,c:this.c+(this.destination.c-this.c)*a,d:this.d+(this.destination.d-this.d)*a,e:this.e+(this.destination.e-this.e)*a,f:this.f+(this.destination.f-this.f)*a});if(this.param&&this.param.to){var c={rotation:this.param.from.rotation+(this.param.to.rotation-this.param.from.rotation)*a,cx:this.param.from.cx,cy:this.param.from.cy};b=b.rotate((this.param.to.rotation-2*this.param.from.rotation)*a,c.cx,c.cy),b.param=c}return b},multiply:function(a){return new s.Matrix(this["native"]().multiply(k(a)["native"]()))},inverse:function(){return new s.Matrix(this["native"]().inverse())},translate:function(a,b){return new s.Matrix(this["native"]().translate(a||0,b||0))},scale:function(a,b,c,d){return(1==arguments.length||3==arguments.length)&&(b=a),3==arguments.length&&(d=c,c=b),this.around(c,d,new s.Matrix(a,0,0,b,0,0))},rotate:function(a,b,c){return a=s.utils.radians(a),this.around(b,c,new s.Matrix(Math.cos(a),Math.sin(a),-Math.sin(a),Math.cos(a),0,0))},flip:function(a,b){return"x"==a?this.scale(-1,1,b,0):this.scale(1,-1,0,b)},skew:function(a,b,c,d){return this.around(c,d,this["native"]().skewX(a||0).skewY(b||0))},around:function(a,b,c){return this.multiply(new s.Matrix(1,0,0,1,a||0,b||0)).multiply(c).multiply(new s.Matrix(1,0,0,1,-a||0,-b||0))},"native":function(){for(var a=s.parser.draw.node.createSVGMatrix(),b=u.length-1;b>=0;b--)a[u[b]]=this[u[b]];return a},toString:function(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}},parent:s.Element,construct:{ctm:function(){return new s.Matrix(this.node.getCTM())}}}),s.extend(s.Element,{attr:function(a,b,c){if(null==a){for(a={},b=this.node.attributes,c=b.length-1;c>=0;c--)a[b[c].nodeName]=s.regex.isNumber.test(b[c].nodeValue)?parseFloat(b[c].nodeValue):b[c].nodeValue;return a}if("object"==typeof a)for(b in a)this.attr(b,a[b]);else if(null===b)this.node.removeAttribute(a);else{if(null==b)return b=this.node.getAttribute(a),null==b?s.defaults.attrs[a]:s.regex.isNumber.test(b)?parseFloat(b):b;"stroke-width"==a?this.attr("stroke",parseFloat(b)>0?this._stroke:null):"stroke"==a&&(this._stroke=b),("fill"==a||"stroke"==a)&&(s.regex.isImage.test(b)&&(b=this.doc().defs().image(b,0,0)),b instanceof s.Image&&(b=this.doc().defs().pattern(0,0,function(){this.add(b)}))),"number"==typeof b?b=new s.Number(b):s.Color.isColor(b)?b=new s.Color(b):Array.isArray(b)?b=new s.Array(b):b instanceof s.Matrix&&b.param&&(this.param=b.param),"leading"==a?this.leading&&this.leading(b):"string"==typeof c?this.node.setAttributeNS(c,a,b.toString()):this.node.setAttribute(a,b.toString()),!this.rebuild||"font-size"!=a&&"x"!=a||this.rebuild(a,b)}return this}}),s.extend(s.Element,s.FX,{transform:function(a,b){var c,d=this.target||this;if("object"!=typeof a)return c=new s.Matrix(d).extract(),"object"==typeof this.param&&(c.rotation=this.param.rotation,c.cx=this.param.cx,c.cy=this.param.cy),"string"==typeof a?c[a]:c;if(c=this instanceof s.FX&&this.attrs.transform?this.attrs.transform:new s.Matrix(d),b=!!b||!!a.relative,null!=a.a)c=b?c.multiply(new s.Matrix(a)):new s.Matrix(a);else if(null!=a.rotation)l(a,d),b&&(a.rotation+=this.param&&null!=this.param.rotation?this.param.rotation:c.extract().rotation),this.param=a,this instanceof s.Element&&(c=b?c.rotate(a.rotation,a.cx,a.cy):c.rotate(a.rotation-c.extract().rotation,a.cx,a.cy));else if(null!=a.scale||null!=a.scaleX||null!=a.scaleY){if(l(a,d),a.scaleX=null!=a.scale?a.scale:null!=a.scaleX?a.scaleX:1,a.scaleY=null!=a.scale?a.scale:null!=a.scaleY?a.scaleY:1,!b){var e=c.extract();a.scaleX=1*a.scaleX/e.scaleX,a.scaleY=1*a.scaleY/e.scaleY}c=c.scale(a.scaleX,a.scaleY,a.cx,a.cy)}else if(null!=a.skewX||null!=a.skewY){if(l(a,d),a.skewX=null!=a.skewX?a.skewX:0,a.skewY=null!=a.skewY?a.skewY:0,!b){var e=c.extract();c=c.multiply((new s.Matrix).skew(e.skewX,e.skewY,a.cx,a.cy).inverse())}c=c.skew(a.skewX,a.skewY,a.cx,a.cy)}else a.flip?c=c.flip(a.flip,null==a.offset?d.bbox()["c"+a.flip]:a.offset):(null!=a.x||null!=a.y)&&(b?c=c.translate(a.x,a.y):(null!=a.x&&(c.e=a.x),null!=a.y&&(c.f=a.y)));return this.attr("transform",c)}}),s.extend(s.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){var a=(this.attr("transform")||"").split(/\)\s*/).slice(0,-1).map(function(a){var b=a.trim().split("(");return[b[0],b[1].split(",").map(function(a){return parseFloat(a)})]}).reduce(function(a,b){return"matrix"==b[0]?a.multiply(j(b[1])):a[b[0]].apply(a,b[1])},new s.Matrix);return this.attr("transform",a),a}}),s.extend(s.Element,{style:function(a,b){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==typeof a)for(b in a)this.style(b,a[b]);else{if(!s.regex.isCss.test(a))return this.node.style[d(a)];a=a.split(";");for(var c=0;c<a.length;c++)b=a[c].split(":"),this.style(b[0].replace(/\s+/g,""),b[1])}else this.node.style[d(a)]=null===b||s.regex.isBlank.test(b)?"":b;return this}}),s.Parent=s.invent({create:function(a){this.constructor.call(this,a)},inherit:s.Element,extend:{children:function(){return s.utils.map(s.utils.filterSVGElements(this.node.childNodes),function(a){return s.adopt(a)})},add:function(a,b){return this.has(a)||(b=null==b?this.children().length:b,this.node.insertBefore(a.node,this.node.childNodes[b]||null)),this},put:function(a,b){return this.add(a,b),a},has:function(a){return this.index(a)>=0},index:function(a){return this.children().indexOf(a)},get:function(a){return this.children()[a]},first:function(){return this.children()[0]},last:function(){return this.children()[this.children().length-1]},each:function(a,b){var c,d,e=this.children();for(c=0,d=e.length;d>c;c++)e[c]instanceof s.Element&&a.apply(e[c],[c,e]),b&&e[c]instanceof s.Container&&e[c].each(a,b);return this},removeElement:function(a){return this.node.removeChild(a.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),s.Container=s.invent({create:function(a){this.constructor.call(this,a)},inherit:s.Parent,extend:{viewbox:function(a){return 0==arguments.length?new s.ViewBox(this):(a=1==arguments.length?[a.x,a.y,a.width,a.height]:[].slice.call(arguments),this.attr("viewBox",a))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(a){s.Element.prototype[a]=function(b){var c=this;return this.node["on"+a]="function"==typeof b?function(){return b.apply(c,arguments)}:null,this}}),s.listeners=[],s.handlerMap=[],s.on=function(a,b,c){var d=c.bind(a.instance||a),e=(s.handlerMap.indexOf(a)+1||s.handlerMap.push(a))-1,f=b.split(".")[0],g=b.split(".")[1]||"*";s.listeners[e]=s.listeners[e]||{},s.listeners[e][f]=s.listeners[e][f]||{},s.listeners[e][f][g]=s.listeners[e][f][g]||{},s.listeners[e][f][g][c]=d,a.addEventListener(f,d,!1)},s.off=function(a,b,c){var d=s.handlerMap.indexOf(a),e=b&&b.split(".")[0],f=b&&b.split(".")[1];if(-1!=d)if(c)s.listeners[d][e]&&s.listeners[d][e][f||"*"]&&(a.removeEventListener(e,s.listeners[d][e][f||"*"][c],!1),delete s.listeners[d][e][f||"*"][c]);else if(f&&e){if(s.listeners[d][e]&&s.listeners[d][e][f]){for(c in s.listeners[d][e][f])s.off(a,[e,f].join("."),c);delete s.listeners[d][e][f]}}else if(f)for(b in s.listeners[d])for(namespace in s.listeners[d][b])f===namespace&&s.off(a,[b,f].join("."));else if(e){if(s.listeners[d][e]){for(namespace in s.listeners[d][e])s.off(a,[e,namespace].join("."));delete s.listeners[d][e]}}else{for(b in s.listeners[d])s.off(a,b);delete s.listeners[d]}},s.extend(s.Element,{on:function(a,b){return s.on(this.node,a,b),this},off:function(a,b){return s.off(this.node,a,b),this},fire:function(a,b){return a instanceof Event?this.node.dispatchEvent(a):this.node.dispatchEvent(new v(a,{detail:b})),this}}),s.Defs=s.invent({create:"defs",inherit:s.Container}),s.G=s.invent({create:"g",inherit:s.Container,extend:{x:function(a){return null==a?this.transform("x"):this.transform({x:-this.x()+a},!0)},y:function(a){return null==a?this.transform("y"):this.transform({y:-this.y()+a},!0)},cx:function(a){return null==a?this.tbox().cx:this.x(a-this.tbox().width/2)},cy:function(a){return null==a?this.tbox().cy:this.y(a-this.tbox().height/2)}},construct:{group:function(){return this.put(new s.G)}}}),s.extend(s.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var a=this.position()+1,b=this.parent();return b.removeElement(this).add(this,a),b instanceof s.Doc&&b.node.appendChild(b.defs().node),this},backward:function(){var a=this.position();return a>0&&this.parent().removeElement(this).add(this,a-1),this},front:function(){var a=this.parent();return a.node.appendChild(this.node),a instanceof s.Doc&&a.node.appendChild(a.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(a){a.remove();var b=this.position();return this.parent().add(a,b),this},after:function(a){a.remove();var b=this.position();return this.parent().add(a,b+1),this}}),s.Mask=s.invent({create:function(){this.constructor.call(this,s.create("mask")),this.targets=[]},inherit:s.Container,extend:{remove:function(){for(var a=this.targets.length-1;a>=0;a--)this.targets[a]&&this.targets[a].unmask();return delete this.targets,this.parent().removeElement(this),this}},construct:{mask:function(){return this.defs().put(new s.Mask)}}}),s.extend(s.Element,{maskWith:function(a){return this.masker=a instanceof s.Mask?a:this.parent().mask().add(a),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),s.ClipPath=s.invent({create:function(){this.constructor.call(this,s.create("clipPath")),this.targets=[]},inherit:s.Container,extend:{remove:function(){for(var a=this.targets.length-1;a>=0;a--)this.targets[a]&&this.targets[a].unclip();return delete this.targets,this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new s.ClipPath)}}}),s.extend(s.Element,{clipWith:function(a){return this.clipper=a instanceof s.ClipPath?a:this.parent().clip().add(a),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),s.Gradient=s.invent({create:function(a){this.constructor.call(this,s.create(a+"Gradient")),this.type=a},inherit:s.Container,extend:{at:function(a,b,c){return this.put(new s.Stop).update(a,b,c)},update:function(a){return this.clear(),"function"==typeof a&&a.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()}},construct:{gradient:function(a,b){return this.defs().gradient(a,b)}}}),s.extend(s.Gradient,s.FX,{from:function(a,b){return"radial"==(this.target||this).type?this.attr({fx:new s.Number(a),fy:new s.Number(b)}):this.attr({x1:new s.Number(a),y1:new s.Number(b)})},to:function(a,b){return"radial"==(this.target||this).type?this.attr({cx:new s.Number(a),cy:new s.Number(b)}):this.attr({x2:new s.Number(a),y2:new s.Number(b)})}}),s.extend(s.Defs,{gradient:function(a,b){return this.put(new s.Gradient(a)).update(b)}}),s.Stop=s.invent({create:"stop",inherit:s.Element,extend:{update:function(a){return("number"==typeof a||a instanceof s.Number)&&(a={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=a.opacity&&this.attr("stop-opacity",a.opacity),null!=a.color&&this.attr("stop-color",a.color),null!=a.offset&&this.attr("offset",new s.Number(a.offset)),this}}}),s.Pattern=s.invent({create:"pattern",inherit:s.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(a){return this.clear(),"function"==typeof a&&a.call(this,this),this},toString:function(){return this.fill()}},construct:{pattern:function(a,b,c){return this.defs().pattern(a,b,c)}}}),s.extend(s.Defs,{pattern:function(a,b,c){return this.put(new s.Pattern).update(c).attr({x:0,y:0,width:a,height:b,patternUnits:"userSpaceOnUse"})}}),s.Doc=s.invent({create:function(a){a&&(a="string"==typeof a?document.getElementById(a):a,"svg"==a.nodeName?this.constructor.call(this,a):(this.constructor.call(this,s.create("svg")),a.appendChild(this.node)),this.namespace().size("100%","100%").defs())},inherit:s.Container,extend:{namespace:function(){return this.attr({xmlns:s.ns,version:"1.1"}).attr("xmlns:xlink",s.xlink,s.xmlns)},defs:function(){if(!this._defs){var a;(a=this.node.getElementsByTagName("defs")[0])?this._defs=s.adopt(a):this._defs=new s.Defs,this.node.appendChild(this._defs.node)}return this._defs},parent:function(){return"#document"==this.node.parentNode.nodeName?null:this.node.parentNode},spof:function(a){var b=this.node.getScreenCTM();return b&&this.style("left",-b.e%1+"px").style("top",-b.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this}}}),s.Shape=s.invent({create:function(a){this.constructor.call(this,a)},inherit:s.Element}),s.Bare=s.invent({create:function(a,b){if(this.constructor.call(this,s.create(a)),b)for(var c in b.prototype)"function"==typeof b.prototype[c]&&(this[c]=b.prototype[c])},inherit:s.Element,extend:{words:function(a){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(document.createTextNode(a)),this}}}),s.extend(s.Parent,{element:function(a,b){return this.put(new s.Bare(a,b))},symbol:function(){return this.defs().element("symbol",s.Container)}}),s.Use=s.invent({create:"use",inherit:s.Shape,extend:{element:function(a,b){return this.attr("href",(b||"")+"#"+a,s.xlink)}},construct:{use:function(a,b){return this.put(new s.Use).element(a,b)}}}),s.Rect=s.invent({create:"rect",inherit:s.Shape,construct:{rect:function(a,b){return this.put((new s.Rect).size(a,b))}}}),s.Circle=s.invent({create:"circle",inherit:s.Shape,construct:{circle:function(a){return this.put(new s.Circle).rx(new s.Number(a).divide(2)).move(0,0)}}}),s.extend(s.Circle,s.FX,{rx:function(a){return this.attr("r",a)},ry:function(a){return this.rx(a)}}),s.Ellipse=s.invent({create:"ellipse",inherit:s.Shape,construct:{ellipse:function(a,b){return this.put(new s.Ellipse).size(a,b).move(0,0)}}}),s.extend(s.Ellipse,s.Rect,s.FX,{rx:function(a){return this.attr("rx",a)},ry:function(a){return this.attr("ry",a)}}),s.extend(s.Circle,s.Ellipse,{x:function(a){return null==a?this.cx()-this.rx():this.cx(a+this.rx())},y:function(a){return null==a?this.cy()-this.ry():this.cy(a+this.ry())},cx:function(a){return null==a?this.attr("cx"):this.attr("cx",a)},cy:function(a){return null==a?this.attr("cy"):this.attr("cy",a)},width:function(a){return null==a?2*this.rx():this.rx(new s.Number(a).divide(2))},height:function(a){return null==a?2*this.ry():this.ry(new s.Number(a).divide(2))},size:function(a,b){var c=h(this.bbox(),a,b);return this.rx(new s.Number(c.width).divide(2)).ry(new s.Number(c.height).divide(2))}}),s.Line=s.invent({create:"line",inherit:s.Shape,extend:{array:function(){return new s.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(a,b,c,d){return a=4==arguments.length?{x1:a,y1:b,x2:c,y2:d}:new s.PointArray(a).toLine(),this.attr(a)},move:function(a,b){return this.attr(this.array().move(a,b).toLine())},size:function(a,b){var c=h(this.bbox(),a,b);return this.attr(this.array().size(c.width,c.height).toLine())}},construct:{line:function(a,b,c,d){return this.put(new s.Line).plot(a,b,c,d)}}}),s.Polyline=s.invent({create:"polyline",inherit:s.Shape,construct:{polyline:function(a){return this.put(new s.Polyline).plot(a)}}}),s.Polygon=s.invent({create:"polygon",inherit:s.Shape,construct:{polygon:function(a){return this.put(new s.Polygon).plot(a)}}}),s.extend(s.Polyline,s.Polygon,{array:function(){return this._array||(this._array=new s.PointArray(this.attr("points")))},plot:function(a){return this.attr("points",this._array=new s.PointArray(a))},move:function(a,b){return this.attr("points",this.array().move(a,b))},size:function(a,b){var c=h(this.bbox(),a,b);return this.attr("points",this.array().size(c.width,c.height))}}),s.extend(s.Line,s.Polyline,s.Polygon,{morphArray:s.PointArray,x:function(a){return null==a?this.bbox().x:this.move(a,this.bbox().y)},y:function(a){return null==a?this.bbox().y:this.move(this.bbox().x,a)},width:function(a){var b=this.bbox();return null==a?b.width:this.size(a,b.height)},height:function(a){var b=this.bbox();return null==a?b.height:this.size(b.width,a)}}),s.Path=s.invent({create:"path",inherit:s.Shape,extend:{morphArray:s.PathArray,array:function(){return this._array||(this._array=new s.PathArray(this.attr("d")))},plot:function(a){return this.attr("d",this._array=new s.PathArray(a))},move:function(a,b){return this.attr("d",this.array().move(a,b))},x:function(a){return null==a?this.bbox().x:this.move(a,this.bbox().y)},y:function(a){return null==a?this.bbox().y:this.move(this.bbox().x,a)},size:function(a,b){var c=h(this.bbox(),a,b);return this.attr("d",this.array().size(c.width,c.height))},width:function(a){return null==a?this.bbox().width:this.size(a,this.bbox().height)},height:function(a){return null==a?this.bbox().height:this.size(this.bbox().width,a)}},construct:{path:function(a){return this.put(new s.Path).plot(a)}}}),s.Image=s.invent({create:"image",inherit:s.Shape,extend:{load:function(a){if(!a)return this;var b=this,c=document.createElement("img");return c.onload=function(){var d=b.parent(s.Pattern);0==b.width()&&0==b.height()&&b.size(c.width,c.height),d&&0==d.width()&&0==d.height()&&d.size(b.width(),b.height()),"function"==typeof b._loaded&&b._loaded.call(b,{width:c.width,height:c.height,ratio:c.width/c.height,url:a})},this.attr("href",c.src=this.src=a,s.xlink)},loaded:function(a){return this._loaded=a,this}},construct:{image:function(a,b,c){return this.put(new s.Image).load(a).size(b||0,c||b||0)}}}),s.Text=s.invent({create:function(){this.constructor.call(this,s.create("text")),this._leading=new s.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",s.defaults.attrs["font-family"])},inherit:s.Shape,extend:{x:function(a){return null==a?this.attr("x"):(this.textPath||this.lines().each(function(){this.newLined&&this.x(a)}),this.attr("x",a))},y:function(a){var b=this.attr("y"),c="number"==typeof b?b-this.bbox().y:0;return null==a?"number"==typeof b?b-c:b:this.attr("y","number"==typeof a?a+c:a)},cx:function(a){return null==a?this.bbox().cx:this.x(a-this.bbox().width/2)},cy:function(a){return null==a?this.bbox().cy:this.y(a-this.bbox().height/2)},text:function(a){if("undefined"==typeof a)return this.content;if(this.clear().build(!0),"function"==typeof a)a.call(this,this);else{a=(this.content=a).split("\n");for(var b=0,c=a.length;c>b;b++)this.tspan(a[b]).newLine()}return this.build(!1).rebuild()},size:function(a){return this.attr("font-size",a).rebuild()},leading:function(a){return null==a?this._leading:(this._leading=new s.Number(a),this.rebuild())},lines:function(){var a=s.utils.map(s.utils.filterSVGElements(this.node.childNodes),function(a){return s.adopt(a)});return new s.Set(a)},rebuild:function(a){if("boolean"==typeof a&&(this._rebuild=a),this._rebuild){var b=this;this.lines().each(function(){this.newLined&&(this.textPath||this.attr("x",b.attr("x")),this.attr("dy",b._leading*new s.Number(b.attr("font-size"))))}),this.fire("rebuild")}return this},build:function(a){return this._build=!!a,this}},construct:{text:function(a){return this.put(new s.Text).text(a)},plain:function(a){return this.put(new s.Text).plain(a)}}}),s.Tspan=s.invent({create:"tspan",inherit:s.Shape,extend:{text:function(a){return"function"==typeof a?a.call(this,this):this.plain(a),this},dx:function(a){return this.attr("dx",a)},dy:function(a){return this.attr("dy",a)},newLine:function(){var a=this.parent(s.Text);return this.newLined=!0,this.dy(a._leading*a.attr("font-size")).attr("x",a.x())}}}),s.extend(s.Text,s.Tspan,{plain:function(a){return this._build===!1&&this.clear(),this.node.appendChild(document.createTextNode(this.content=a)),this},tspan:function(a){var b=(this.textPath()||this).node,c=new s.Tspan;return this._build===!1&&this.clear(),b.appendChild(c.node),c.text(a)},clear:function(){for(var a=(this.textPath()||this).node;a.hasChildNodes();)a.removeChild(a.lastChild);return this instanceof s.Text&&(this.content=""),this},length:function(){return this.node.getComputedTextLength()}}),s.TextPath=s.invent({create:"textPath",inherit:s.Element,parent:s.Text,construct:{path:function(a){for(var b=new s.TextPath,c=this.doc().defs().path(a);this.node.hasChildNodes();)b.node.appendChild(this.node.firstChild);return this.node.appendChild(b.node),b.attr("href","#"+c,s.xlink),this},plot:function(a){var b=this.track();return b&&b.plot(a),this},track:function(){var a=this.textPath();return a?a.reference("href"):void 0},textPath:function(){return this.node.firstChild&&"textPath"==this.node.firstChild.nodeName?s.adopt(this.node.firstChild):void 0}}}),s.Nested=s.invent({create:function(){this.constructor.call(this,s.create("svg")),this.style("overflow","visible")},inherit:s.Container,construct:{nested:function(){return this.put(new s.Nested)}}}),s.A=s.invent({create:"a",inherit:s.Container,extend:{to:function(a){return this.attr("href",a,s.xlink)},show:function(a){return this.attr("show",a,s.xlink)},target:function(a){return this.attr("target",a)}},construct:{link:function(a){return this.put(new s.A).to(a)}}}),s.extend(s.Element,{linkTo:function(a){var b=new s.A;return"function"==typeof a?a.call(b,b):b.to(a),this.parent().put(b).put(this)}}),s.Marker=s.invent({create:"marker",inherit:s.Container,extend:{width:function(a){return this.attr("markerWidth",a)},height:function(a){return this.attr("markerHeight",a)},ref:function(a,b){return this.attr("refX",a).attr("refY",b)},update:function(a){return this.clear(),"function"==typeof a&&a.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(a,b,c){return this.defs().marker(a,b,c)}}}),s.extend(s.Defs,{marker:function(a,b,c){return this.put(new s.Marker).size(a,b).ref(a/2,b/2).viewbox(0,0,a,b).attr("orient","auto").update(c)}}),s.extend(s.Line,s.Polyline,s.Polygon,s.Path,{marker:function(a,b,c,d){var e=["marker"];return"all"!=a&&e.push(a),e=e.join("-"),a=arguments[1]instanceof s.Marker?arguments[1]:this.doc().marker(b,c,d),this.attr(e,a)}});var t={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(a,b){return"color"==b?a:a+"-"+b}};["fill","stroke"].forEach(function(a){var b,c={};c[a]=function(c){if("string"==typeof c||s.Color.isRgb(c)||c&&"function"==typeof c.fill)this.attr(a,c);else for(b=t[a].length-1;b>=0;b--)null!=c[t[a][b]]&&this.attr(t.prefix(a,t[a][b]),c[t[a][b]]);return this},s.extend(s.Element,s.FX,c)}),s.extend(s.Element,s.FX,{rotate:function(a,b,c){return this.transform({rotation:a,cx:b,cy:c})},skew:function(a,b,c,d){return this.transform({skewX:a,skewY:b,cx:c,cy:d})},scale:function(a,b,c,d){return 1==arguments.length||3==arguments.length?this.transform({scale:a,cx:b,cy:c}):this.transform({scaleX:a,scaleY:b,cx:c,cy:d})},translate:function(a,b){return this.transform({x:a,y:b})},flip:function(a,b){return this.transform({flip:a,offset:b})},matrix:function(a){return this.attr("transform",new s.Matrix(a))},opacity:function(a){return this.attr("opacity",a)},dx:function(a){return this.x((this.target||this).x()+a)},dy:function(a){return this.y((this.target||this).y()+a)},dmove:function(a,b){return this.dx(a).dy(b)}}),s.extend(s.Rect,s.Ellipse,s.Circle,s.Gradient,s.FX,{radius:function(a,b){return"radial"==(this.target||this).type?this.attr({r:new s.Number(a)}):this.rx(a).ry(null==b?a:b)}}),s.extend(s.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(a){return this.node.getPointAtLength(a)}}),s.extend(s.Parent,s.Text,s.FX,{font:function(a){
for(var b in a)"leading"==b?this.leading(a[b]):"anchor"==b?this.attr("text-anchor",a[b]):"size"==b||"family"==b||"weight"==b||"stretch"==b||"variant"==b||"style"==b?this.attr("font-"+b,a[b]):this.attr(b,a[b]);return this}}),s.Set=s.invent({create:function(a){Array.isArray(a)?this.members=a:this.clear()},extend:{add:function(){var a,b,c=[].slice.call(arguments);for(a=0,b=c.length;b>a;a++)this.members.push(c[a]);return this},remove:function(a){var b=this.index(a);return b>-1&&this.members.splice(b,1),this},each:function(a){for(var b=0,c=this.members.length;c>b;b++)a.apply(this.members[b],[b,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(a){return this.index(a)>=0},index:function(a){return this.members.indexOf(a)},get:function(a){return this.members[a]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){var a=new s.BBox;if(0==this.members.length)return a;var b=this.members[0].rbox();return a.x=b.x,a.y=b.y,a.width=b.width,a.height=b.height,this.each(function(){a=a.merge(this.rbox())}),a}},construct:{set:function(a){return new s.Set(a)}}}),s.FX.Set=s.invent({create:function(a){this.set=a}}),s.Set.inherit=function(){var a,b=[];for(var a in s.Shape.prototype)"function"==typeof s.Shape.prototype[a]&&"function"!=typeof s.Set.prototype[a]&&b.push(a);b.forEach(function(a){s.Set.prototype[a]=function(){for(var b=0,c=this.members.length;c>b;b++)this.members[b]&&"function"==typeof this.members[b][a]&&this.members[b][a].apply(this.members[b],arguments);return"animate"==a?this.fx||(this.fx=new s.FX.Set(this)):this}}),b=[];for(var a in s.FX.prototype)"function"==typeof s.FX.prototype[a]&&"function"!=typeof s.FX.Set.prototype[a]&&b.push(a);b.forEach(function(a){s.FX.Set.prototype[a]=function(){for(var b=0,c=this.set.members.length;c>b;b++)this.set.members[b].fx[a].apply(this.set.members[b].fx,arguments);return this}})},s.extend(s.Element,{data:function(a,b,c){if("object"==typeof a)for(b in a)this.data(b,a[b]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+a))}catch(d){return this.attr("data-"+a)}else this.attr("data-"+a,null===b?null:c===!0||"string"==typeof b||"number"==typeof b?b:JSON.stringify(b));return this}}),s.extend(s.Element,{remember:function(a,b){if("object"==typeof arguments[0])for(var b in a)this.remember(b,a[b]);else{if(1==arguments.length)return this.memory()[a];this.memory()[a]=b}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var a=arguments.length-1;a>=0;a--)delete this.memory()[arguments[a]];return this},memory:function(){return this._memory||(this._memory={})}}),s.get=function(a){var b=document.getElementById(r(a)||a);return b?s.adopt(b):void 0},s.select=function(a,b){return new s.Set(s.utils.map((b||document).querySelectorAll(a),function(a){return s.adopt(a)}))},s.extend(s.Parent,{select:function(a){return s.select(a,this.node)}});var u="abcdef".split("");if("function"!=typeof v){var v=function(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c};v.prototype=window.Event.prototype,window.CustomEvent=v}return function(a){for(var b=0,c=["moz","webkit"],d=0;d<c.length&&!window.requestAnimationFrame;++d)a.requestAnimationFrame=a[c[d]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];a.requestAnimationFrame=a.requestAnimationFrame||function(c){var d=(new Date).getTime(),e=Math.max(0,16-(d-b)),f=a.setTimeout(function(){c(d+e)},e);return b=d+e,f},a.cancelAnimationFrame=a.cancelAnimationFrame||a.clearTimeout}(window),s})},{}],28:[function(a,b,c){!function(){SVG.parse={attr:function(a){var b,c=a.attributes||[],d={};for(b=c.length-1;b>=0;b--)d[c[b].nodeName]=c[b].nodeValue;return"undefined"!=typeof d.stroke&&"undefined"==typeof d["stroke-width"]&&(d["stroke-width"]=1),d},transform:function(a){var b,c,d,e={},f=(a||"").match(/[A-Za-z]+\([^\)]+\)/g)||[],g=SVG.defaults.trans;for(b=f.length-1;b>=0;b--)switch(c=f[b].match(/([A-Za-z]+)\(([^\)]+)\)/),d=(c[2]||"").replace(/^\s+/,"").replace(/,/g," ").replace(/\s+/g," ").split(" "),c[1]){case"matrix":e.a=SVG.regex.isNumber.test(d[0])?parseFloat(d[0]):g.a,e.b=parseFloat(d[1])||g.b,e.c=parseFloat(d[2])||g.c,e.d=SVG.regex.isNumber.test(d[3])?parseFloat(d[3]):g.d,e.e=parseFloat(d[4])||g.e,e.f=parseFloat(d[5])||g.f;break;case"rotate":e.rotation=parseFloat(d[0])||g.rotation,e.cx=parseFloat(d[1])||g.cx,e.cy=parseFloat(d[2])||g.cy;break;case"scale":e.scaleX=SVG.regex.isNumber.test(d[0])?parseFloat(d[0]):g.scaleX,e.scaleY=SVG.regex.isNumber.test(d[1])?parseFloat(d[1]):g.scaleY;break;case"skewX":e.skewX=parseFloat(d[0])||g.skewX;break;case"skewY":e.skewY=parseFloat(d[0])||g.skewY;break;case"translate":e.x=parseFloat(d[0])||g.x,e.y=parseFloat(d[1])||g.y}return e}},SVG.defaults.trans={x:0,y:0,scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0,matrix:this.matrix,a:1,b:0,c:0,d:1,e:0,f:0}}()},{}]},{},[2])(2)});